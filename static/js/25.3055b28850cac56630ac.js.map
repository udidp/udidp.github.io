{"version":3,"sources":["webpack:///src/views/Wallet/MyMailList.vue","webpack:///./src/views/Wallet/MyMailList.vue?61f6","webpack:///./src/views/Wallet/MyMailList.vue"],"names":["MyMailList","name","components","LoadingDot","ElTabLoading","computed","extends_default","Vuex","mapState","items","state","ewallet","mails","filter","m","abandoned","unitBas","Object","utils","dapp","mailRegGas","wallet","chainId","mapGetters","loading","itemTotal","this","length","data","txTimeout","confirm","visible","contents","title","hash","fulltext","abandon","mailtext","owner","recharge","closeable","expiration","expirationText","moreshow","chargeYears","maxchargeYears","mailhash","transState","yearItems","y","bas","methods","domainMailFormat","row","column","cellVal","expireFormat","hashShort","mailtextShow","shortAlias","aliasName","gotoDetail","toggleMoreshow","hideRechargeDialog","assign_default","recharge4Mail","index","domaintext","maxYear","canRechargeYear","unitPrice","parseFloat","i","map","it","selectedYear","year","cancelAbandonDialog","abandonMail","submitAbandon","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","web3State","ret","msg","wrap","_context","prev","next","$store","getters","$metamask","abrupt","mail_manager_api","sent","dispatch","t0","t1","api_errors","$t","$message","$basTip","error","text","code","stop","gotoUpdateMailInfo","$router","push","path","query","reloadRecords","submitRechargeMail","_this2","_callee4","that","errMsg","validResp","_context4","token_api","spender","costwei","on","txhash","timeout","setTimeout","_callee2","_context2","ts","_ref2","_callee3","receipt","_context3","_x","apply","arguments","err","beforeMount","_this3","_callee5","_context5","mounted","_this4","_callee6","_context6","watch","val","old","networks","Wallet_MyMailList","render","_vm","_h","$createElement","_c","_self","directives","rawName","value","expression","staticStyle","width","attrs","type","cell-click","prop","formatter","label","_v","sortable","header-align","align","scopedSlots","_u","key","fn","scope","staticClass","_s","bca","class-name","size","slot","command","disabled","nativeOn","click","$event","$index","Boolean","_e","margin","gutter","height","close-on-click-modal","show-close","before-close","top","custom-class","update:visible","$set","expireDate","_l","idx","class","unit","position","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/25.3055b28850cac56630ac.js","sourcesContent":["<template>\n  <div>\n    <el-table type=\"index\"\n      v-loading=\"false\"\n      :data=\"items\" @cell-click=\"gotoDetail\"\n      style=\"width: 100%\">\n      <el-table-column\n        prop=\"fulltext\"\n        index=\"hash\"\n        :formatter=\"mailtextShow\"\n        :label=\"$t('l.BMailAccount')\"\n        width=\"180\">\n      </el-table-column>\n      <el-table-column\n        prop=\"domaintext\"\n        index=\"domain\"\n        :formatter=\"domainMailFormat\"\n        :label=\"$t('l.EWalletDomainMailServers')\"\n        width=\"160\">\n      </el-table-column>\n      <el-table-column\n        prop=\"expiration\"\n        sortable\n        :label=\"$t('l.ExpiredDate')\"\n        :formatter=\"expireFormat\"\n        width=\"150\">\n      </el-table-column>\n\n      <el-table-column\n        prop=\"bca\"\n        header-align=\"center\"\n        align=\"left\"\n        :label=\"$t('l.BMailBCALabel')\"\n        >\n         <template slot-scope=\"scope\">\n           <div class=\"mail-public-key\">\n             {{scope.row.bca}}\n           </div>\n         </template>\n      </el-table-column>\n\n      <el-table-column header-align=\"center\"\n        index=\"operate\" width=\"200\"\n        class-name=\"el-tbc-operator\"\n        align=\"right\" :label=\"$t('l.Operating')\">\n        <template slot-scope=\"scope\">\n          <el-dropdown>\n            <el-button size=\"mini\" type=\"default\">\n              {{$t('l.MoreOperation')}} <i class=\"el-icon-arrow-down el-icon--right\"></i>\n            </el-button>\n            <el-dropdown-menu slot=\"dropdown\">\n              <el-dropdown-item\n                :command=\"scope.row\"\n                :disabled=\"scope.row.abandoned\"\n                @click.native=\"gotoUpdateMailInfo(scope.$index,scope.row)\">\n                {{$t('l.UpdateTagLabel')}}\n              </el-dropdown-item>\n              <el-dropdown-item\n                :disabled=\"scope.row.abandoned\"\n                :command=\"scope.row\"\n                @click.native=\"abandonMail(scope.$index,scope.row)\"\n                >\n                {{$t('l.AbandonLabel') }}\n              </el-dropdown-item>\n            </el-dropdown-menu>\n          </el-dropdown>\n\n          <el-button\n            size=\"mini\"\n            :disabled=\"!Boolean(scope.row.canRechargeYear)\"\n            :type=\"!Boolean(scope.row.canRechargeYear) ? 'default':'primary'\"\n            @click=\"recharge4Mail(scope.$index, scope.row)\">\n            {{$t('l.RechargeLabel')}}\n          </el-button>\n        </template>\n      </el-table-column>\n      <el-tab-loading :loading=\"loading\" slot=\"empty\" v-if=\"loading\"/>\n      <el-tab-loading :loading=\"loading\" slot=\"append\" v-if=\"loading && items.length > 0 \"/>\n    </el-table>\n    <el-row :gutter=\"20\" class=\"bg-white\" style=\"margin:0px;\">\n      <div class=\"bg-white\" style=\"height:25px;\"></div>\n      <div class=\"float-table-total\">\n        <span >\n          {{$t('l.TableTotal')}} {{itemTotal}} {{$t('l.TableRecord')}}\n        </span>\n        <span @click=\"reloadRecords\">\n          <i class=\"fa fa-refresh\"></i>\n        </span>\n      </div>\n    </el-row>\n\n    <!-- Dialog -->\n    <el-dialog  width=\"25%\"\n      :close-on-click-modal=\"false\"\n      :show-close=\"!abandon.loading\"\n      :before-close=\"cancelAbandonDialog\"\n      :visible.sync=\"abandon.visible\"\n      top=\"35vh\"\n      custom-class=\"bas-dialog\">\n      <div class=\"bas-dg-header\" slot=\"title\">\n      </div>\n\n      <div class=\"bas-dg-body\">\n        <div class=\"abandon-title\">\n          <span>{{$t('p.MailAbandonDialogTitlePrefix')}}</span>\n          <span class=\"mail-name\">{{abandon.mailtext}}</span>\n          <span>{{$t('p.MailAbandonDialogTitleSuffix')}}</span>\n        </div>\n\n        <div class=\"text-center\">\n          <span class=\"bas-dg-gray-tips\">\n            {{$t('p.MailAbandonDialogWarnTip')}}\n          </span>\n        </div>\n\n        <div class=\"text-center\">\n          <el-button :disabled=\"abandon.loading\"\n            type=\"primary\"\n            @click=\"submitAbandon\" class=\"bas-w-65 bas-btn-primary btn-abandon\">\n            <div>\n              <LoadingDot v-if=\"abandon.loading\" />\n            </div>\n            {{abandon.loading ? $t('l.Transactioning') : $t('l.ConfirmAbandon')}}\n          </el-button>\n        </div>\n      </div>\n    </el-dialog>\n\n    <!-- recharge dialog -->\n    <el-dialog  width=\"40%\"\n      :close-on-click-modal=\"false\"\n      :show-close=\"recharge.closeable\"\n      :before-close=\"hideRechargeDialog\"\n      :visible.sync=\"recharge.visible\">\n\n      <div class=\"recharge-header\" slot=\"title\">\n        <div class=\"title\">\n          <label>{{$t('l.MailLabel')}}:</label>\n          <span>{{recharge.mailtext}}</span>\n        </div>\n        <div class=\"expiration-tip\">\n          <span>\n           {{\n             $t('p.MailRechargeDialogExpirationTip',{expireDate:recharge.expirationText})\n            }}\n          </span>\n        </div>\n      </div>\n\n      <div class=\"container\">\n        <div class=\"row\">\n          <div v-for=\"(it,idx) in recharge.items\"\n            :key=\"idx\"  class=\"col-4\"\n            @click=\"selectedYear(it.y)\"\n            :class=\"(idx >=3) && Boolean(!recharge.moreshow) ? 'd-none': ''\">\n            <div class=\"clearfix recharge-year-box\" :class=\" it.y === recharge.chargeYears ? 'box-selected':''\">\n              <div class=\"inner-box\">\n                <div class=\"year-box-inline\">\n                  <span>{{$t(`l.RechargeY${it.y}`)}}</span>\n                </div>\n                <div class=\"year-box-inline\">\n                  <span class=\"bas-unit\">{{it.bas}}</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"row\">\n          <div class=\"bas-inline-between\">\n            <div class=\"max-tip\">\n              {{\n                $t('p.MailRechargeMaxYearsComments',\n                {\n                  year:recharge.maxchargeYears,\n                  unit:recharge.maxchargeYears==1 ? $t('g.EnumTSYear') : $t('g.EnumTSYears')\n                })\n              }}\n            </div>\n            <div @click=\"toggleMoreshow\"\n              class=\"more-toggle\">\n              <span>\n                <div class=\"fa\" :class=\"recharge.moreshow ? 'fa-chevron-up' : 'fa-chevron-down'\"></div>\n                {{$t('l.MoreChargeYears')}}\n              </span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"dialog-footer\" slot=\"footer\">\n        <div class=\"container text-center\">\n          <el-button type=\"primary\"\n            :disabled=\"recharge.loading\"\n            @click=\"submitRechargeMail\"\n            class=\"w-25 bas-btn-primary\">\n            <div style=\"position:relative;\">\n              <LoadingDot v-if=\"recharge.loading\"/>\n            </div>\n             {{recharge.loading ? $t('l.RechargingTip') : $t('l.ConfirmRechargeBtn')}}\n          </el-button>\n        </div>\n      </div>\n    </el-dialog>\n\n  </div>\n</template>\n<style lang=\"css\">\n\n.el-table--scrollable-x .el-table__body-wrapper::-webkit-scrollbar {\n    height: 8px;\n}\n\n.el-table--scrollable-x .el-table__body-wrapper::-webkit-scrollbar-track {\n    height: 6px;\n}\n\n.abandon-title {\n  width: 100%;\n  text-align: center;\n  height:28px;\n  font-size:20px;\n  font-family:PingFangSC-Regular,PingFang SC;\n  font-weight:400;\n  color:rgba(4,6,46,1);\n  line-height:28px;\n  letter-spacing:1px;\n}\n\n.btn-abandon {\n  font-family:PingFangSC-Semibold,PingFang SC;\n  font-weight:600;\n  /* line-height:28px;\n  font-size:20px; */\n  letter-spacing:1px;\n}\n\n.bas-dg-gray-tips {\n  font-family:PingFangSC-Regular,PingFang SC;\n  font-weight:400;\n  color:rgba(150,150,166,1);\n  line-height:20px;\n}\n\n.abandon-title span.mail-name {\n  color:  #00CA9B ;\n}\n.recharge-header {\n  border-bottom: 1px solid rgba(235,237,237,1);\n  padding-bottom: .75rem;\n}\n\n.recharge-header div.title {\n  font-size:22px;\n  font-family:PingFangSC-Semibold,PingFang SC;\n  font-weight:600;\n  color:rgba(4,6,46,1);\n  line-height:30px;\n  letter-spacing:1px;\n}\n\n.recharge-header div.expiration-tip {\n  font-size:18px;\n  font-family:PingFangSC-Regular,PingFang SC;\n  font-weight:400;\n  color:rgba(150,150,166,1);\n  line-height:25px;\n}\n\n.bas-inline-between div.more-toggle {\n  cursor: pointer;\n}\n\n.bas-inline-between div.more-toggle:hover {\n  color: rgba(4,6,46,.85);\n}\n\n.recharge-year-box {\n  cursor: pointer;\n  width: 100%;\n  height:106px;\n  display: inline-flexbox;\n  direction: column;\n  justify-content: center;\n  align-items: center;\n  background:rgba(245,246,246,1);\n  border-radius:4px;\n  border:1px solid rgba(243,245,245,1);\n  padding: 1.5rem .25rem;\n  margin: 9px auto;\n}\n\n.recharge-year-box>div.inner-box{\n  width: 100%;\n  text-align: center;\n}\n\n.recharge-year-box:hover {\n  background:linear-gradient(270deg,rgba(0,231,185,1) 0%,rgba(0,202,155,1) 100%);\n  color: rgba(255,255,255,1);\n}\n\n.box-selected {\n  background:linear-gradient(270deg,rgba(0,231,185,1) 0%,rgba(0,202,155,1) 100%);\n  color: rgba(255,255,255,1);\n}\n\n.recharge-year-box .year-disabled {\n  color:rgba(150,150,166,1);\n  background:rgba(255,255,255,1);\n  border-radius:1px;\n  border:1px solid rgba(235,237,237,1);\n}\ndiv.year-box-inline{\n  width: 100%;\n  font-size:20px;\n  font-family:PingFangSC-Medium,PingFang SC;\n  font-weight:500;\n  line-height:28px;\n  letter-spacing:1px;\n}\n\n.box-selected div.year-box-inline{\n  font-size:20px;\n  font-family:PingFangSC-Medium,PingFang SC;\n  font-weight:500;\n  color:rgba(255,255,255,1);\n  line-height:28px;\n  letter-spacing:1px;\n}\n\nspan.bas-unit {\n  font-size:36px;\n  font-family:Lato-Bold,Lato;\n  font-weight:bold;\n  color:rgba(0,202,155,1);\n  line-height:44px;\n  letter-spacing:1px;\n}\n\nspan.bas-unit::after {\n  content: 'BAS';\n  font-size: 14px;\n}\n\n.box-selected span.bas-unit,.box-selected span.bas-unit::after,.recharge-year-box:hover span.bas-unit {\n  color:rgba(255,255,255,1);\n}\n/*\n.mail-public-key {\n  max-width: 420px;\n} */\n\n</style>\n\n<script>\nimport {\n  dateFormat,compressAddr,hasExpired,\n  maxRechageYears,wei2Bas\n} from '@/utils'\n\nimport {\n  PARAM_ILLEGAL,USER_REJECTED_REQUEST,UNSUPPORT_NETWORK ,\n  MAIL_HASH_INVALID,ACCOUNT_NOT_MATCHED,LACK_OF_TOKEN\n}from '@/web3-lib/api-errors'\nimport {approveTokenEmitter} from '@/web3-lib/apis/token-api'\nimport {\n  abandonedMail,valid4Recharge,rechargeMail\n} from '@/web3-lib/apis/mail-manager-api'\nimport { checkSupport } from '@/web3-lib/networks'\n\n\nimport LoadingDot from '@/components/LoadingDot.vue'\nimport ElTabLoading from '@/views/widget/ElTabLoading.vue'\n\nexport default {\n  name:\"EWalletMailList\",\n  components:{\n    LoadingDot,\n    ElTabLoading,\n  },\n  computed: {\n    ...Vuex.mapState({\n      items:state => state.ewallet.mails.filter(m => !m.abandoned),\n      unitBas:state => wei2Bas(state.dapp.mailRegGas),\n      wallet: state => state.dapp.wallet,\n      chainId: state => state.dapp.chainId,\n    }),\n    ...Vuex.mapGetters({\n      loading: 'ewallet/mailsLoading'\n    }),\n    itemTotal(){\n      return this.items.length\n    }\n  },\n  data() {\n    return {\n      txTimeout:30,\n      confirm:{\n        visible:false,\n        loading:false,\n        contents:'',\n        title:'',\n        hash:'',\n        fulltext:'',\n      },\n      abandon:{\n        visible:false,\n        loading:false,\n        hash:'',\n        mailtext:'',\n        owner:''\n      },\n      recharge:{\n        visible:false,\n        loading:false,\n        closeable:true,\n        expiration:0,\n        expirationText:'',\n        moreshow:false,\n        chargeYears:0,\n        maxchargeYears:0,\n        state:'',//approving\n        items:[],\n        mailtext:'',\n        mailhash:'',\n        owner:''\n      },\n      transState:'',//approving\n      yearItems:[\n        {y:5,bas:10},{y:4,bas:8},{y:3,bas:6},{y:2,bas:4},{y:1,bas:2}\n      ]\n    }\n  },\n  methods: {\n    domainMailFormat(row,column,cellVal){\n      return `@${cellVal}`\n    },\n    expireFormat(row,column,cellVal){\n      return cellVal ? dateFormat(cellVal) : ''\n    },\n    hashShort(row,column,cellVal){\n      return compressAddr(cellVal)\n    },\n    mailtextShow(row,column,cellVal){\n      const shortAlias = compressAddr(row.hash)\n      return row.aliasName ? `${row.aliasName}` : `${shortAlias}`\n    },\n    gotoDetail(){\n\n    },\n    toggleMoreshow(){\n      this.recharge.moreshow = !this.recharge.moreshow\n    },\n    hideRechargeDialog(){\n      this.recharge = Object.assign({},this.recharge,{\n        visible:false,\n        loading:false,\n        closeable:true,\n        expiration:0,\n        expirationText:'',\n        chargeYears:0,\n        maxchargeYears:0,\n        mailtext:'',\n        mailhash:'',\n        owner:''\n      })\n    },\n    recharge4Mail(index,row){\n      if(!row.hash){\n        console.error('no hash')\n        return\n      }\n      const domaintext = row.domaintext\n      const mailtext = row.aliasName ? row.aliasName : compressAddr(row.hash) ;\n      const expirationTS = row.expiration\n      const maxYear = row.canRechargeYear || maxRechageYears(row.expiration)\n      const unitPrice = parseFloat(this.unitBas)\n\n      this.recharge = Object.assign({},this.recharge,{\n        visible:true,\n        loading:false,\n        expiration:row.expiration,\n        expirationText:dateFormat(row.expiration),\n        chargeYears:maxYear,\n        maxchargeYears:maxYear,\n        items:this.yearItems.filter( i => i.y<=maxYear).map(it =>{\n          it.bas = parseFloat(it.y)*unitPrice\n          return it\n        }),\n        mailtext:mailtext,\n        mailhash:row.hash,\n        owner:row.owner\n      })\n      //console.log(this.recharge)\n    },\n    selectedYear(year){\n      if(this.recharge.loading)return\n      this.recharge.chargeYears = year\n    },\n    cancelAbandonDialog(){\n      this.abandon = Object({},{\n        visible:false,\n        loading:false,\n        hash:'',\n        mailtext:'',\n        owner:''\n      })\n    },\n    abandonMail(index,row){\n      //console.log(row.hash)\n      const mailtext = row.aliasName ? row.aliasName : compressAddr(row.hash) ;\n      this.abandon = Object.assign({},{\n        visible:true,\n        loading:false,\n        hash:row.hash,\n        mailtext:mailtext,\n        owner:row.owner\n      })\n    },\n    async submitAbandon(){\n      if(this.$store.getters['metaMaskDisabled']){\n        this.$metamask()\n        return\n      }\n\n      const web3State = this.$store.getters['web3State']\n      const chainId = web3State.chainId\n      const wallet = web3State.wallet\n      const owner = this.abandon.owner\n\n      const fulltext = this.abandon.mailtext\n\n      const hash = this.abandon.hash\n      if(!hash){\n        console.error('null hash')\n        return\n      }\n\n      try{\n        this.abandon.loading = true\n        const ret = await abandonedMail(hash,chainId,wallet)\n        console.log(ret)\n        this.abandon = Object({},{\n          visible:false,\n          loading:false,\n          hash:'',\n          mailtext:'',\n          owner:''\n        })\n        this.$store.dispatch('ewallet/updataMyMailProps',ret)\n      }catch(ex){\n        this.abandon.loading = false\n        let msg = ''\n        switch (ex) {\n          case PARAM_ILLEGAL:\n            console.error(ex)\n            return;\n          case UNSUPPORT_NETWORK:\n            msg = this.$t(`code.${ex}`)\n            this.$message(this.$basTip.error(msg))\n            return;\n          case ACCOUNT_NOT_MATCHED:\n            msg = this.$t(`code.ex`,{wallet,owner})\n            this.$message(this.$basTip.error(msg))\n            return\n          case MAIL_HASH_INVALID:\n            msg = this.$t(`code.${ex}`,{text:fulltext})\n            this.$message(this.$basTip.error(msg))\n            return;\n          default:\n            break;\n        }\n        if(ex.code === USER_REJECTED_REQUEST){\n          msg = this.$t(`code.${USER_REJECTED_REQUEST}`)\n          this.$message(this.$basTip.error(msg))\n          return ;\n        }\n        console.error(ex)\n      }\n    },\n    gotoUpdateMailInfo(index,row){\n      console.log(row)\n      //hash, fulltext\n      const hash = row.hash\n      const domaintext = row.domaintext\n\n      if(hash && domaintext){\n        this.$router.push({\n          path:'/mail/detail_conf',\n          name:'mail.detailconf',\n          query:{\n            hash:hash,\n            domaintext\n          }\n        })\n      }\n    },\n    reloadRecords(){\n      const web3State = this.$store.getters['web3State']\n      //console.log(\"reload\",\"ewallet/loadEWalletMails\",web3State)\n      if(web3State.chainId && web3State.wallet){\n        this.$store.dispatch('ewallet/loadEWalletMails',web3State)\n      }\n    },\n    async submitRechargeMail(){\n      if(this.$store.getters['metaMaskDisabled']){\n        this.$metamask()\n        return\n      }\n      const owner = this.recharge.owner\n      const web3State = this.$store.getters['web3State']\n      const year = this.recharge.chargeYears\n      const hash = this.recharge.mailhash\n      const mailtext = this.recharge.mailtext\n\n      const chainId = web3State.chainId\n      const wallet = web3State.wallet\n      const that = this\n\n      let errMsg = ''\n      try{\n        const validResp = await valid4Recharge(hash,year,chainId,wallet)\n        console.log(validResp)\n\n        approveTokenEmitter(validResp.spender,validResp.costwei,chainId,wallet).on(\n          'transactionHash',txhash=>{\n            that.recharge.loading = true\n            that.recharge.closeable=false\n            const timeout = that.txTimeout\n            setTimeout(async () => {\n              that.$message(that.$basTip.error(that.$t('g.MetaMaskTxSlowTimeoutTip',{ts:timeout})))\n              that.recharge.closeable=true\n            }, timeout * 1000);\n          }\n        ).on('receipt',async (receipt)=>{\n          console.log('receipt',receipt)\n          const ret = await rechargeMail(hash,year,chainId,wallet)\n          console.log(ret)\n          that.$store.dispatch('ewallet/updateMailInfo',{hash:hash,chainId:chainId})\n          that.recharge.loading = false\n          that.hideRechargeDialog()\n        }).on('error',(err,receipt)=>{\n          that.recharge.loading = false\n          that.recharge.closeable=true\n          if(err.code===USER_REJECTED_REQUEST){\n            errMsg = that.$t(`code.${USER_REJECTED_REQUEST}`)\n            that.$message(that.$basTip.error(errMsg))\n            return;\n          }else{\n            console.error('Approve error',err)\n          }\n        })\n\n      }catch(ex){\n        let msg = ''\n        switch (ex) {\n          case LACK_OF_TOKEN:\n          case UNSUPPORT_NETWORK:\n            msg = this.$t('code.${ex}')\n            this.$message(this.$basTip(msg))\n            return;\n          case MAIL_HASH_INVALID:\n            msg = this.$t('code.${ex}',{text:mailtext})\n            this.$message(this.$basTip(msg))\n            return;\n          case ACCOUNT_NOT_MATCHED:\n            msg = this.$t('code.${ex}',{wallet,owner:''})\n            this.$message(this.$basTip(msg))\n            return;\n          default:\n            console.error(ex)\n            break;\n        }\n\n      }\n    }\n  },\n  async beforeMount() {\n    this.$store.dispatch('ewallet/fillEWalletMails')\n  },\n  async mounted() {\n    const web3State = this.$store.getters['web3State']\n    console.log(\"ewallet/loadEWalletMails\",web3State)\n    if(web3State.chainId && web3State.wallet){\n      this.$store.dispatch('ewallet/loadEWalletMails',web3State)\n    }\n  },\n  watch: {\n    wallet(val,old) {\n      console.info(\"Wallet Changed and Reload BMail list...\",val,this.chainId)\n      if(checkSupport(this.chainId) && val) {\n        this.$store.dispatch('ewallet/loadEWalletMails',{chainId:this.chainId,wallet:val})\n      }\n    },\n    chainId(val,old){\n      console.info(\"ChainId Changed and Reload BMail list...\")\n      if(checkSupport(val) && this.wallet) {\n        this.$store.dispatch('ewallet/loadEWalletMails',{chainId:val,wallet:this.wallet})\n      }\n    }\n  },\n}\n</script>\n<style>\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/Wallet/MyMailList.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(false),expression:\"false\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"type\":\"index\",\"data\":_vm.items},on:{\"cell-click\":_vm.gotoDetail}},[_c('el-table-column',{attrs:{\"prop\":\"fulltext\",\"index\":\"hash\",\"formatter\":_vm.mailtextShow,\"label\":_vm.$t('l.BMailAccount'),\"width\":\"180\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"domaintext\",\"index\":\"domain\",\"formatter\":_vm.domainMailFormat,\"label\":_vm.$t('l.EWalletDomainMailServers'),\"width\":\"160\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"expiration\",\"sortable\":\"\",\"label\":_vm.$t('l.ExpiredDate'),\"formatter\":_vm.expireFormat,\"width\":\"150\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"bca\",\"header-align\":\"center\",\"align\":\"left\",\"label\":_vm.$t('l.BMailBCALabel')},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticClass:\"mail-public-key\"},[_vm._v(\"\\n           \"+_vm._s(scope.row.bca)+\"\\n         \")])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"header-align\":\"center\",\"index\":\"operate\",\"width\":\"200\",\"class-name\":\"el-tbc-operator\",\"align\":\"right\",\"label\":_vm.$t('l.Operating')},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-dropdown',[_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"default\"}},[_vm._v(\"\\n            \"+_vm._s(_vm.$t('l.MoreOperation'))+\" \"),_c('i',{staticClass:\"el-icon-arrow-down el-icon--right\"})]),_vm._v(\" \"),_c('el-dropdown-menu',{attrs:{\"slot\":\"dropdown\"},slot:\"dropdown\"},[_c('el-dropdown-item',{attrs:{\"command\":scope.row,\"disabled\":scope.row.abandoned},nativeOn:{\"click\":function($event){return _vm.gotoUpdateMailInfo(scope.$index,scope.row)}}},[_vm._v(\"\\n              \"+_vm._s(_vm.$t('l.UpdateTagLabel'))+\"\\n            \")]),_vm._v(\" \"),_c('el-dropdown-item',{attrs:{\"disabled\":scope.row.abandoned,\"command\":scope.row},nativeOn:{\"click\":function($event){return _vm.abandonMail(scope.$index,scope.row)}}},[_vm._v(\"\\n              \"+_vm._s(_vm.$t('l.AbandonLabel'))+\"\\n            \")])],1)],1),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"mini\",\"disabled\":!Boolean(scope.row.canRechargeYear),\"type\":!Boolean(scope.row.canRechargeYear) ? 'default':'primary'},on:{\"click\":function($event){return _vm.recharge4Mail(scope.$index, scope.row)}}},[_vm._v(\"\\n          \"+_vm._s(_vm.$t('l.RechargeLabel'))+\"\\n        \")])]}}])}),_vm._v(\" \"),(_vm.loading)?_c('el-tab-loading',{attrs:{\"slot\":\"empty\",\"loading\":_vm.loading},slot:\"empty\"}):_vm._e(),_vm._v(\" \"),(_vm.loading && _vm.items.length > 0 )?_c('el-tab-loading',{attrs:{\"slot\":\"append\",\"loading\":_vm.loading},slot:\"append\"}):_vm._e()],1),_vm._v(\" \"),_c('el-row',{staticClass:\"bg-white\",staticStyle:{\"margin\":\"0px\"},attrs:{\"gutter\":20}},[_c('div',{staticClass:\"bg-white\",staticStyle:{\"height\":\"25px\"}}),_vm._v(\" \"),_c('div',{staticClass:\"float-table-total\"},[_c('span',[_vm._v(\"\\n        \"+_vm._s(_vm.$t('l.TableTotal'))+\" \"+_vm._s(_vm.itemTotal)+\" \"+_vm._s(_vm.$t('l.TableRecord'))+\"\\n      \")]),_vm._v(\" \"),_c('span',{on:{\"click\":_vm.reloadRecords}},[_c('i',{staticClass:\"fa fa-refresh\"})])])]),_vm._v(\" \"),_c('el-dialog',{attrs:{\"width\":\"25%\",\"close-on-click-modal\":false,\"show-close\":!_vm.abandon.loading,\"before-close\":_vm.cancelAbandonDialog,\"visible\":_vm.abandon.visible,\"top\":\"35vh\",\"custom-class\":\"bas-dialog\"},on:{\"update:visible\":function($event){return _vm.$set(_vm.abandon, \"visible\", $event)}}},[_c('div',{staticClass:\"bas-dg-header\",attrs:{\"slot\":\"title\"},slot:\"title\"}),_vm._v(\" \"),_c('div',{staticClass:\"bas-dg-body\"},[_c('div',{staticClass:\"abandon-title\"},[_c('span',[_vm._v(_vm._s(_vm.$t('p.MailAbandonDialogTitlePrefix')))]),_vm._v(\" \"),_c('span',{staticClass:\"mail-name\"},[_vm._v(_vm._s(_vm.abandon.mailtext))]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.$t('p.MailAbandonDialogTitleSuffix')))])]),_vm._v(\" \"),_c('div',{staticClass:\"text-center\"},[_c('span',{staticClass:\"bas-dg-gray-tips\"},[_vm._v(\"\\n          \"+_vm._s(_vm.$t('p.MailAbandonDialogWarnTip'))+\"\\n        \")])]),_vm._v(\" \"),_c('div',{staticClass:\"text-center\"},[_c('el-button',{staticClass:\"bas-w-65 bas-btn-primary btn-abandon\",attrs:{\"disabled\":_vm.abandon.loading,\"type\":\"primary\"},on:{\"click\":_vm.submitAbandon}},[_c('div',[(_vm.abandon.loading)?_c('LoadingDot'):_vm._e()],1),_vm._v(\"\\n          \"+_vm._s(_vm.abandon.loading ? _vm.$t('l.Transactioning') : _vm.$t('l.ConfirmAbandon'))+\"\\n        \")])],1)])]),_vm._v(\" \"),_c('el-dialog',{attrs:{\"width\":\"40%\",\"close-on-click-modal\":false,\"show-close\":_vm.recharge.closeable,\"before-close\":_vm.hideRechargeDialog,\"visible\":_vm.recharge.visible},on:{\"update:visible\":function($event){return _vm.$set(_vm.recharge, \"visible\", $event)}}},[_c('div',{staticClass:\"recharge-header\",attrs:{\"slot\":\"title\"},slot:\"title\"},[_c('div',{staticClass:\"title\"},[_c('label',[_vm._v(_vm._s(_vm.$t('l.MailLabel'))+\":\")]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.recharge.mailtext))])]),_vm._v(\" \"),_c('div',{staticClass:\"expiration-tip\"},[_c('span',[_vm._v(\"\\n         \"+_vm._s(_vm.$t('p.MailRechargeDialogExpirationTip',{expireDate:_vm.recharge.expirationText}))+\"\\n        \")])])]),_vm._v(\" \"),_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"row\"},_vm._l((_vm.recharge.items),function(it,idx){return _c('div',{key:idx,staticClass:\"col-4\",class:(idx >=3) && Boolean(!_vm.recharge.moreshow) ? 'd-none': '',on:{\"click\":function($event){return _vm.selectedYear(it.y)}}},[_c('div',{staticClass:\"clearfix recharge-year-box\",class:it.y === _vm.recharge.chargeYears ? 'box-selected':''},[_c('div',{staticClass:\"inner-box\"},[_c('div',{staticClass:\"year-box-inline\"},[_c('span',[_vm._v(_vm._s(_vm.$t((\"l.RechargeY\" + (it.y)))))])]),_vm._v(\" \"),_c('div',{staticClass:\"year-box-inline\"},[_c('span',{staticClass:\"bas-unit\"},[_vm._v(_vm._s(it.bas))])])])])])}),0),_vm._v(\" \"),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"bas-inline-between\"},[_c('div',{staticClass:\"max-tip\"},[_vm._v(\"\\n            \"+_vm._s(_vm.$t('p.MailRechargeMaxYearsComments',\n              {\n                year:_vm.recharge.maxchargeYears,\n                unit:_vm.recharge.maxchargeYears==1 ? _vm.$t('g.EnumTSYear') : _vm.$t('g.EnumTSYears')\n              }))+\"\\n          \")]),_vm._v(\" \"),_c('div',{staticClass:\"more-toggle\",on:{\"click\":_vm.toggleMoreshow}},[_c('span',[_c('div',{staticClass:\"fa\",class:_vm.recharge.moreshow ? 'fa-chevron-up' : 'fa-chevron-down'}),_vm._v(\"\\n              \"+_vm._s(_vm.$t('l.MoreChargeYears'))+\"\\n            \")])])])])]),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('div',{staticClass:\"container text-center\"},[_c('el-button',{staticClass:\"w-25 bas-btn-primary\",attrs:{\"type\":\"primary\",\"disabled\":_vm.recharge.loading},on:{\"click\":_vm.submitRechargeMail}},[_c('div',{staticStyle:{\"position\":\"relative\"}},[(_vm.recharge.loading)?_c('LoadingDot'):_vm._e()],1),_vm._v(\"\\n           \"+_vm._s(_vm.recharge.loading ? _vm.$t('l.RechargingTip') : _vm.$t('l.ConfirmRechargeBtn'))+\"\\n        \")])],1)])])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-265d3905\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/Wallet/MyMailList.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-265d3905\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./MyMailList.vue\")\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-265d3905\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=1!./MyMailList.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./MyMailList.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./MyMailList.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-265d3905\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./MyMailList.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/Wallet/MyMailList.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}