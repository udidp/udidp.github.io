webpackJsonp([42],{BOLl:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});s("pFYg");var e=s("woOf"),i=s.n(e),n=s("g1m8"),o=s("9DUr"),c=s("SR37"),r=s("1rPB"),m=s("rFtf"),d=s("0xDb"),l={name:"DomainNewRegisting",data:function(){return{commitData:{domain:"",calcCost:0,isSubdomain:!0,topDomain:"",year:""},txHashes:[],dappState:{},completed:!0,registState:"approving"}},components:{LoadingDot:n.a,RegistApplyFooter:o.a,RegistTransFooter:c.a},mounted:function(){var t=this.$store.getters["web3/dappState"];this.dappState=i()({},t);var a=this.$route.params.commitData;a&&t.chainId&&(this.commitData=i()({},this.commitData,a),this.registCommit(t.chainId,t.wallet,a.costWei,a.topDomain,a.domain,a.year))},computed:{getItems:function(){return this.txHashes},getRegistState:function(){return"p."+this.registState},getFullDomain:function(){return this.commitData.domain+"."+this.commitData.topDomain},btnDisabled:function(){return"success"!==this.registState&&"fail"!==this.registState}},methods:{addItem:function(t,a){this.txHashes.push({hash:t,state:a})},updateItem:function(t,a){var s=this.txHashes.findIndex(function(a){return a.hash===t});s>=0&&this.txHashes.splice(s,1,{hash:t,state:a})},registCommit:function(t,a,s,e,i,n){var o=this;this.registState="approving",Object(r.a)(t,s).on("transactionHash",function(t){o.addItem(t,"loading")}).on("receipt",function(t){t.status;o.updateItem(t.transactionHash,"success"),o.registState="confirming"}).on("error",function(t,a){if(o.registState="fail",4001===t.code){var s=o.$t("g.MetaMaskRejectedAuth");o.$message(o.$basTip.error(s))}a&&o.updateItem(a.transactionHash,"fail")})},chageItem:function(t){this.txHashes.push({hash:"0x89224aa5e79396cc2435e76d03d5e395d5d5bb757ab6035a2544f5efd5f97e24",state:"loading"})},configRefs:function(){var t=this.commitData.domain+"."+this.commitData.topDomain;t&&this.$router.push({path:"/domain/dnsupdate/"+t})},gotoWallet:function(){this.$store.getters.metaMaskDisabled?this.$metamask():this.$router.push({name:"wallet.layout"})},continueRegist:function(){if(this.$store.getters.metaMaskDisabled)this.$metamask();else{var t=this.commitData.topDomain;if(t){var a={name:"domain.registsub",params:{topDomain:t,subDomain:""}};this.$router.push(a)}}}},watch:{registState:function(t,a){if("approving"===a&&"confirming"===t){var s=this.dappState.chainId,e=this.commitData.year,i=Object(d.v)(punycode.toASCII(this.commitData.topDomain)),n=Object(d.v)(punycode.toASCII(this.commitData.domain)),o=this;Object(m.d)(s,i,n,e).on("transactionHash",function(t){o.addItem(t,"loading")}).on("receipt",function(t){o.updateItem(t.transactionHash,"success"),o.registState="success"}).on("error",function(t,a){if(o.registState="fail",4001===t.code){var s=o.$t("g.MetaMaskRejectedAuth");o.$message(o.$basTip.error(s))}a&&o.updateItem(a.transactionHash,"fail")})}}}},u={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"container"},[s("div",{staticClass:"row justify-content-center align-items-center"},[s("el-card",{staticClass:"col-md-8 col-sm-10 box-card"},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("h4",[t._v("\n          Transaction Hash\n        ")])]),t._v(" "),t._l(t.getItems,function(a,e){return s("div",{key:e,staticClass:"text item bas-inline-between"},[s("div",{},[t._v(t._s(a.hash))]),t._v(" "),"loading"===a.state?s("div",[s("loading-dot")],1):"success"===a.state?s("div",[s("i",{staticClass:"fa fa-check bas-text-green"})]):"fail"===a.state?s("div",[s("i",{staticClass:"fa fa-close text-danger"})]):t._e()])})],2)],1),t._v(" "),s("div",{staticClass:"row",staticStyle:{height:"24px"}}),t._v(" "),s("div",{staticClass:"row justify-content-center align-items-center "},[t.completed?s("el-card",{staticClass:"col-md-8 col-sm-10 box-card"},[s("div",{staticClass:"domain-regist--result-container text-center"},[s("img",{staticClass:"bas-bingo",attrs:{src:"/static/icons/bingo.png"}}),t._v(" "),"approving"==t.registState?s("h6",{staticClass:"bas-text-green mt-2"},[t._v("\n          "+t._s(t.$t("p.DomainRegistApprove"))+"\n        ")]):t._e(),t._v(" "),"confirming"==t.registState?s("h6",{staticClass:"bas-text-green mt-2"},[t._v("\n          "+t._s(t.$t("p.DomainRegistConfirm"))+"\n        ")]):t._e(),t._v(" "),"fail"==t.registState?s("h6",{staticClass:"text-danger mt-2"},[t._v("\n          "+t._s(t.$t("p.DomainRegistFail"))+"\n        ")]):t._e(),t._v(" "),"success"==t.registState?s("h6",{staticClass:"bas-text-green mt-2"},[t._v("\n          "+t._s(t.$t("p.DomainRegistSuccess"))+"\n        ")]):t._e(),t._v(" "),s("h2",{staticStyle:{"margin-top":".75rem"}},[t._v("\n          "+t._s(t.commitData.domain+"."+t.commitData.topDomain)+"\n        ")]),t._v(" "),"success"==t.registState?s("h6",{staticStyle:{color:"rgba(212,216,216,1)"}},[t._v("\n          "+t._s(t.$t("p.DomainRegistSuccessTip"))+"\n        ")]):t._e()]),t._v(" "),s("div",{staticClass:"w-100 bas-btn-group text-center"},[s("button",{staticClass:"w-25 mx-2 btn bas-btn-green-border",attrs:{disabled:t.btnDisabled},on:{click:t.configRefs}},[t.btnDisabled?s("i",{staticClass:"fa fa-ban"}):t._e(),t._v("\n          配置域名\n        ")]),t._v(" "),s("button",{staticClass:"w-25 mx-2 btn bas-btn-green-border",attrs:{disabled:t.btnDisabled},on:{click:t.gotoWallet}},[t.btnDisabled?s("i",{staticClass:"fa fa-ban"}):t._e(),t._v("\n          去我的资产钱包\n        ")]),t._v(" "),s("button",{staticClass:"w-25 mx-2 btn",class:t.btnDisabled?"":"bas-btn-primary",attrs:{disabled:t.btnDisabled},on:{click:t.continueRegist}},[t.btnDisabled?s("i",{staticClass:"fa fa-ban"}):t._e(),t._v("\n          继续申请\n        ")])])]):t._e()],1)])},staticRenderFns:[]};var h=s("VU/8")(l,u,!1,function(t){s("FFzR")},null,null);a.default=h.exports},FFzR:function(t,a){}});
//# sourceMappingURL=42.428e9d88bc81618a6daa.js.map