{"version":3,"sources":["webpack:///src/views/Mail/MailInternalRegist.vue","webpack:///./src/views/Mail/MailInternalRegist.vue?d8e3","webpack:///./src/views/Mail/MailInternalRegist.vue"],"names":["MailInternalRegist","name","components","CircleLoading","computed","extends_default","showMailtext","this","domaintext","Vuex","mapState","unitBas","state","Object","utils","dapp","mailRegGas","maxMailRegYears","data","years","hash","owner","mailName","mailAlias","mailActived","inputctrl","message","ctrl","loading","timeoutId","methods","initData","selectYearsHandle","submitMailName","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","web3State","chainId","wallet","domainhash","msg","validMsg","commitData","wrap","_context","prev","next","$message","$basTip","error","abrupt","$store","getters","$metamask","mailDomainText","trim","length","$t","text","biz_validator","api_errors","mailname","mail_manager_api","sent","mailalias","mailhash","$router","push","path","params","t0","t1","code","includes","stop","mounted","dmtext","$route","query","watch","val","old","_this2","clearTimeout","that","fulltext","setTimeout","_callee2","resp","_context2","view_api","mail","abandoned","Mail_MailInternalRegist","render","_vm","_h","$createElement","_c","_self","staticClass","_m","_v","_s","attrs","label-position","label-width","class","Boolean","show-message","placeholder","type","model","value","callback","$$v","expression","slot","_e","_l","idx","key","on","click","$event","parseFloat","width","close-on-click-modal","show-close","visible","top","update:visible","$set","staticRenderFns","src","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/19.9dfca0e70355178df34a.js","sourcesContent":["<template>\n  <div class=\"bmail-regist-wrapper\">\n    <div class=\"container inner-center-container\">\n      <div class=\"row justify-content-center pt-5 pb-5\">\n        <div class=\"bmail-box-auto bmail-content-card\">\n          <div class=\"header-logo\">\n            <img src=\"/static/icons/logo_header_blk.png\" class=\"img-fluid\" />\n          </div>\n          <div class=\"header-title\">\n            <h5 class=\"bmail-regist-title\">\n              {{ $t(\"l.ApplyMailNameLabel\") }}\n            </h5>\n          </div>\n\n          <div class=\"bmail-regist-form-wrapper\">\n            <el-form\n              label-position=\"top\"\n              label-width=\"120px\"\n              class=\"bmail-regist-form\"\n            >\n              <!-- 输入 -->\n              <el-form-item\n                class=\"w-100\"\n                :class=\"\n                  Boolean(inputctrl.message) || Boolean(mailName)\n                    ? 'bmail-account-min-bottom'\n                    : ''\n                \"\n                show-message=\"false\"\n              >\n                <div class=\"bmail-name-flex\">\n                  <el-input\n                    class=\"bmail-account\"\n                    v-model=\"mailName\"\n                    :placeholder=\"$t('p.MailRegistInputPlaceholder')\"\n                    type=\"text\"\n                  >\n                    <div slot=\"suffix\" class=\"bmail-service-suffix\">\n                      {{ showMailtext }}\n                    </div>\n                  </el-input>\n                </div>\n              </el-form-item>\n              <div\n                class=\"bmailname-wrapper\"\n                :class=\"\n                  Boolean(inputctrl.message) ? 'bas-warn-box' : 'bas-grass-box'\n                \"\n                v-if=\"Boolean(inputctrl.message) || Boolean(mailName)\"\n              >\n                <div>\n                  {{\n                    inputctrl.message\n                      ? inputctrl.message\n                      : $t(\"p.MailRegistNameWarnTip\")\n                  }}\n                </div>\n              </div>\n              <!-- 别名 -->\n              <el-form-item>\n                <label class=\"bmail-form-label\">\n                  {{ $t(\"l.MailAlias\") }}\n                </label>\n                <el-input\n                  v-model=\"mailAlias\"\n                  :placeholder=\"$t('p.MailRegistAliasPlaceholder')\"\n                  class=\"bmail-alias\"\n                >\n                </el-input>\n              </el-form-item>\n              <!-- 购买期限 -->\n              <!-- <div> -->\n              <div class=\"purchase-label-wrapper\">\n                <div class=\"bmail-form-label\">{{ $t(\"l.PurchaseYears\") }}</div>\n              </div>\n\n              <div class=\"years-select-container\">\n                <div\n                  v-for=\"idx in maxMailRegYears\"\n                  :key=\"idx\"\n                  class=\"bmail-year-selector\"\n                >\n                  <div class=\"selector-wrapper\">\n                    <div\n                      class=\"year-inner-box\"\n                      @click=\"selectYearsHandle(idx)\"\n                      :class=\"idx == years ? 'year-active' : ''\"\n                    >\n                      <div v-if=\"idx == years\">\n                        <div class=\"year-active-icon\"></div>\n                      </div>\n                      <div class=\"bas-total\">\n                        {{ idx * parseFloat(unitBas) }}\n                      </div>\n                      <div class=\"mail-years\">\n                        <span>{{ idx }}</span>\n                        <span>{{\n                          idx === 1 ? $t(\"l.Year\") : $t(\"l.Years\")\n                        }}</span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <!-- </div> -->\n            </el-form>\n          </div>\n\n          <div class=\"bmail-regist-btns\">\n            <el-button\n              type=\"primary\"\n              @click=\"submitMailName\"\n              class=\"bas-btn-primary w-100\"\n            >\n              {{ $t(\"l.RegistBtn\") }}\n            </el-button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <el-dialog\n      width=\"320px\"\n      :close-on-click-modal=\"false\"\n      :show-close=\"false\"\n      :visible.sync=\"ctrl.loading\"\n      top=\"35vh\"\n      class=\"bas-dialog-nobody\"\n    >\n      <div slot=\"title\" class=\"bas-wrapper--valid\">\n        <div class=\"logo-container\">\n          <CircleLoading></CircleLoading>\n        </div>\n        <div class=\"bas-dialog-content\">\n          <span class=\"tip-prefix\">\n            {{ $t(\"g.ValidateOnBlockChain\") }}\n          </span>\n          <span class=\"tip-green\"> {{ mailName }}{{ showMailtext }} </span>\n        </div>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n<style lang=\"css\">\n.header-logo img {\n  margin-left: 2rem;\n}\n</style>\n<script>\nimport \"./assets/mail-regist.css\";\nimport { dateFormat, wei2Bas, handleDomain, toUnicodeDomain } from \"@/utils\";\nimport { validMailAccount } from \"@/utils/Validator\";\nimport {\n  PARAM_ILLEGAL,\n  USER_REJECTED_REQUEST,\n  UNSUPPORT_NETWORK,\n  DOMAIN_NOT_EXIST,\n  MAILSERVICE_INACTIVED,\n  MAIL_REGIST_BY_OWNER,\n  MAIL_HASH_EXIST,\n  MAIL_YEAR_OVER_MAX,\n  LACK_OF_TOKEN,\n  NetworkRequestFail,\n  MAIL_HASH_ABANDONED,\n  MAIL_NAME_ILLEGAL,\n} from \"@/web3-lib/api-errors\";\n\nimport { findMailInfo } from \"@/web3-lib/apis/view-api\";\nimport { validPrevRegistMail } from \"@/web3-lib/apis/mail-manager-api\";\nimport { BMailAccountIllegal } from \"@/web3-lib/utils/biz-validator\";\n\nimport CircleLoading from \"@/components/CircleLoading.vue\";\n\nexport default {\n  name: \"MailInternalRegistIndex\",\n  components: {\n    CircleLoading,\n  },\n  computed: {\n    showMailtext() {\n      const domaintext = this.domaintext;\n      return `@${domaintext}`;\n    },\n    ...Vuex.mapState({\n      unitBas: (state) => wei2Bas(state.dapp.mailRegGas || 2),\n      maxMailRegYears: (state) => state.dapp.maxMailRegYears,\n    }),\n  },\n  data() {\n    return {\n      years: 1,\n      domaintext: \"\",\n      hash: \"\",\n      owner: \"\",\n      mailName: \"\",\n      mailAlias: \"\",\n      mailActived: false,\n      inputctrl: {\n        message: \"\",\n      },\n      ctrl: {\n        loading: false,\n        timeoutId: null,\n      },\n    };\n  },\n  methods: {\n    initData(domaintext, hash, owner) {\n      this.domaintext = domaintext;\n      this.hash = hash;\n      this.owner = owner;\n    },\n    selectYearsHandle(years) {\n      this.years =\n        years <= 0 || years > this.maxMailRegYears\n          ? this.maxMailRegYears\n          : years;\n    },\n    async submitMailName() {\n      if (this.inputctrl.message) {\n        this.$message(this.$basTip.error(this.inputctrl.message));\n        return;\n      }\n      if (this.$store.getters[\"metaMaskDisabled\"]) {\n        this.$metamask();\n        return;\n      }\n\n      const web3State = this.$store.getters[\"web3State\"];\n      const chainId = web3State.chainId;\n      const wallet = web3State.wallet;\n      const domaintext = this.mailDomainText;\n      const domainhash = this.hash;\n      const mailName = this.mailName;\n      const mailAlias = this.mailAlias;\n\n      let msg = \"\";\n      if (mailName === \"\" || !mailName.trim().length || !domainhash) {\n        msg = this.$t(\"code.888888\", { text: this.$t(\"l.ApplyMailNameLabel\") });\n        this.$message(this.$basTip.error(msg));\n        return;\n      }\n\n      if (BMailAccountIllegal(mailName)) {\n        const validMsg = this.$t(`code.${MAIL_NAME_ILLEGAL}`, {\n          mailname: mailName,\n        });\n        //this.inputctrl.message = validMsg\n        this.$message(this.$basTip.error(validMsg));\n        return;\n      }\n\n      const years = this.years;\n\n      try {\n        this.ctrl.loading = true;\n        /**\n         * return :{domaintext,mailalias,years,chainId,wallet,domainhash,mailhash,costwei,basbal,}\n         */\n        const commitData = await validPrevRegistMail(\n          domainhash,\n          mailName,\n          years,\n          chainId,\n          wallet\n        );\n        //console.log(commitData)\n        this.ctrl.loading = false;\n\n        // route commit page\n        //const mailalias = commitData.mailalias\n        commitData.mailalias = mailAlias;\n        const mailhash = commitData.mailhash;\n        //return;\n        this.$router.push({\n          path: `/mail/registing/${domaintext}/${years}/${mailName}`,\n          name: \"mail.registing\",\n          params: {\n            domaintext,\n            years,\n            mailname: mailName,\n            commitData: commitData,\n          },\n        });\n      } catch (ex) {\n        this.ctrl.loading = false;\n        switch (ex) {\n          case UNSUPPORT_NETWORK:\n          case LACK_OF_TOKEN:\n            msg = this.$t(`code.${ex}`);\n            this.$message(this.$basTip.error(msg));\n            return;\n          case MAIL_HASH_EXIST:\n            msg = this.$t(`code.${ex}`, { mailname: mailName });\n            this.$message(this.$basTip.error(msg));\n            return;\n          case MAIL_REGIST_BY_OWNER:\n            msg = this.$t(`code.${ex}`, { domaintext });\n            this.$message(this.$basTip.error(msg));\n            return;\n          case PARAM_ILLEGAL:\n          case MAILSERVICE_INACTIVED:\n          case DOMAIN_NOT_EXIST:\n          case MAIL_YEAR_OVER_MAX:\n          case PARAM_ILLEGAL:\n            console.log(\"Coding Logic Error:\", ex);\n            return;\n          default:\n            break;\n        }\n        if (ex.code === USER_REJECTED_REQUEST) {\n          msg = this.$t(`code.${ex}`);\n          this.$message(this.$basTip.error(msg));\n          return;\n        } else if (ex.message.includes(NetworkRequestFail)) {\n          msg = this.$t(`code.-32603`);\n          this.$message(this.$basTip.error(msg));\n          return;\n        }\n        console.error(\"Unknown Error:\", ex);\n      }\n    },\n  },\n  mounted() {\n    const dmtext = this.$route.params.domaintext;\n    const hash = this.$route.query.hash;\n    const owner = this.$route.query.owner;\n    console.log(hash, owner);\n    this.initData(dmtext, hash, owner);\n    this.mailActived = this.$route.query.mailActived;\n  },\n  watch: {\n    mailName: function (val, old) {\n      const web3State = this.$store.getters[\"web3State\"];\n      const chainId = web3State.chainId;\n      const wallet = web3State.wallet;\n      const owner = this.owner;\n      if (val !== \"\" && val !== old) {\n        console.log(val);\n        // if(!validMailAccount(val)){\n        //   this.inputctrl.message = this.$t('p.ValidMailAccountNameWarn')\n        //   return;\n        // }\n        this.inputctrl.message = \"\";\n        if (this.ctrl.timeoutId) {\n          clearTimeout(this.ctrl.timeoutId);\n        }\n        const that = this;\n        const fulltext = `${val}@${that.domaintext}`;\n        this.ctrl.timeoutId = setTimeout(async () => {\n          try {\n            const resp = await findMailInfo(fulltext, chainId);\n            console.log(\">>>>>>>.\", resp);\n            if (resp.state) {\n              //console.log(resp.mail)\n              if (resp.mail.abandoned) {\n                //MAIL_HASH_INVALID\n                that.inputctrl.message = that.$t(\n                  `code.${MAIL_HASH_ABANDONED}`,\n                  { text: fulltext }\n                );\n              } else {\n                that.inputctrl.message = that.$t(`code.${MAIL_HASH_EXIST}`, {\n                  text: fulltext,\n                });\n              }\n            } else {\n              that.inputctrl.message = \"\";\n            }\n          } catch (ex) {\n            console.log(\"lazy valid\", ex);\n            that.inputctrl.message = \"\";\n          }\n        }, 1500);\n      } else {\n        this.inputctrl.message = \"\";\n      }\n    },\n  },\n};\n</script>\n<style>\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/Mail/MailInternalRegist.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"bmail-regist-wrapper\"},[_c('div',{staticClass:\"container inner-center-container\"},[_c('div',{staticClass:\"row justify-content-center pt-5 pb-5\"},[_c('div',{staticClass:\"bmail-box-auto bmail-content-card\"},[_vm._m(0),_vm._v(\" \"),_c('div',{staticClass:\"header-title\"},[_c('h5',{staticClass:\"bmail-regist-title\"},[_vm._v(\"\\n            \"+_vm._s(_vm.$t(\"l.ApplyMailNameLabel\"))+\"\\n          \")])]),_vm._v(\" \"),_c('div',{staticClass:\"bmail-regist-form-wrapper\"},[_c('el-form',{staticClass:\"bmail-regist-form\",attrs:{\"label-position\":\"top\",\"label-width\":\"120px\"}},[_c('el-form-item',{staticClass:\"w-100\",class:Boolean(_vm.inputctrl.message) || Boolean(_vm.mailName)\n                  ? 'bmail-account-min-bottom'\n                  : '',attrs:{\"show-message\":\"false\"}},[_c('div',{staticClass:\"bmail-name-flex\"},[_c('el-input',{staticClass:\"bmail-account\",attrs:{\"placeholder\":_vm.$t('p.MailRegistInputPlaceholder'),\"type\":\"text\"},model:{value:(_vm.mailName),callback:function ($$v) {_vm.mailName=$$v},expression:\"mailName\"}},[_c('div',{staticClass:\"bmail-service-suffix\",attrs:{\"slot\":\"suffix\"},slot:\"suffix\"},[_vm._v(\"\\n                    \"+_vm._s(_vm.showMailtext)+\"\\n                  \")])])],1)]),_vm._v(\" \"),(Boolean(_vm.inputctrl.message) || Boolean(_vm.mailName))?_c('div',{staticClass:\"bmailname-wrapper\",class:Boolean(_vm.inputctrl.message) ? 'bas-warn-box' : 'bas-grass-box'},[_c('div',[_vm._v(\"\\n                \"+_vm._s(_vm.inputctrl.message\n                    ? _vm.inputctrl.message\n                    : _vm.$t(\"p.MailRegistNameWarnTip\"))+\"\\n              \")])]):_vm._e(),_vm._v(\" \"),_c('el-form-item',[_c('label',{staticClass:\"bmail-form-label\"},[_vm._v(\"\\n                \"+_vm._s(_vm.$t(\"l.MailAlias\"))+\"\\n              \")]),_vm._v(\" \"),_c('el-input',{staticClass:\"bmail-alias\",attrs:{\"placeholder\":_vm.$t('p.MailRegistAliasPlaceholder')},model:{value:(_vm.mailAlias),callback:function ($$v) {_vm.mailAlias=$$v},expression:\"mailAlias\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"purchase-label-wrapper\"},[_c('div',{staticClass:\"bmail-form-label\"},[_vm._v(_vm._s(_vm.$t(\"l.PurchaseYears\")))])]),_vm._v(\" \"),_c('div',{staticClass:\"years-select-container\"},_vm._l((_vm.maxMailRegYears),function(idx){return _c('div',{key:idx,staticClass:\"bmail-year-selector\"},[_c('div',{staticClass:\"selector-wrapper\"},[_c('div',{staticClass:\"year-inner-box\",class:idx == _vm.years ? 'year-active' : '',on:{\"click\":function($event){return _vm.selectYearsHandle(idx)}}},[(idx == _vm.years)?_c('div',[_c('div',{staticClass:\"year-active-icon\"})]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"bas-total\"},[_vm._v(\"\\n                      \"+_vm._s(idx * parseFloat(_vm.unitBas))+\"\\n                    \")]),_vm._v(\" \"),_c('div',{staticClass:\"mail-years\"},[_c('span',[_vm._v(_vm._s(idx))]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(idx === 1 ? _vm.$t(\"l.Year\") : _vm.$t(\"l.Years\")))])])])])])}),0)],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"bmail-regist-btns\"},[_c('el-button',{staticClass:\"bas-btn-primary w-100\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submitMailName}},[_vm._v(\"\\n            \"+_vm._s(_vm.$t(\"l.RegistBtn\"))+\"\\n          \")])],1)])])]),_vm._v(\" \"),_c('el-dialog',{staticClass:\"bas-dialog-nobody\",attrs:{\"width\":\"320px\",\"close-on-click-modal\":false,\"show-close\":false,\"visible\":_vm.ctrl.loading,\"top\":\"35vh\"},on:{\"update:visible\":function($event){return _vm.$set(_vm.ctrl, \"loading\", $event)}}},[_c('div',{staticClass:\"bas-wrapper--valid\",attrs:{\"slot\":\"title\"},slot:\"title\"},[_c('div',{staticClass:\"logo-container\"},[_c('CircleLoading')],1),_vm._v(\" \"),_c('div',{staticClass:\"bas-dialog-content\"},[_c('span',{staticClass:\"tip-prefix\"},[_vm._v(\"\\n          \"+_vm._s(_vm.$t(\"g.ValidateOnBlockChain\"))+\"\\n        \")]),_vm._v(\" \"),_c('span',{staticClass:\"tip-green\"},[_vm._v(\" \"+_vm._s(_vm.mailName)+_vm._s(_vm.showMailtext)+\" \")])])])])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"header-logo\"},[_c('img',{staticClass:\"img-fluid\",attrs:{\"src\":\"/static/icons/logo_header_blk.png\"}})])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-48b065ba\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/Mail/MailInternalRegist.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-48b065ba\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./MailInternalRegist.vue\")\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-48b065ba\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=1!./MailInternalRegist.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./MailInternalRegist.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./MailInternalRegist.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-48b065ba\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./MailInternalRegist.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/Mail/MailInternalRegist.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}