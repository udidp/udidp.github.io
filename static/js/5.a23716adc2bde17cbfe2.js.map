{"version":3,"sources":["webpack:///src/views/Domain/apply/RegistSubDomain.vue","webpack:///./src/views/Domain/apply/RegistSubDomain.vue?2689","webpack:///./src/views/Domain/apply/RegistSubDomain.vue"],"names":["RegistSubDomain","name","components","GobackNav","computed","extends_default","getTotal","parseFloat","this","unitPrice","years","toFixed","topExpireDate","topasset","expire","Object","utils","showErrorTips","owner","openApplied","exist","showTopDomain","ex","DomainLabel","$t","PriceLabel","PurchaseYearsLabel","RootDomainLabel","ExpireDateLabel","IsOwnerLabel","topText","Vuex","mapGetters","ruleState","mapState","maxRegYears","state","dapp","data","subText","errorMsg","ctrl","loading","methods","goback","$router","go","setUnitPrice","$store","getters","curTs","parseInt","Date","getTime","isCustomed","customWei","customPrice","subBas","checkSubHasTaken","fullText","chainId","_this","domain_api","then","b","domaintext","catch","changeLower","val","trim","toLowerCase","validForm","errMsg","$message","$basTip","error","web3State","Validator","web3_lib_utils","wallet","max","commitRegist","_this2","asyncToGenerator_default","regenerator_default","a","mark","_callee","preData","resp","commitData","msg","wrap","_context","prev","next","$metamask","abrupt","isSubDomain","domainText","customPriceWei","costWei","domains_apply","sent","assign_default","hash","costwei","push","params","t0","t1","api_errors","text","stop","gotoWhois","path","mounted","_this3","_callee2","_context2","web3_lib","$route","assetinfo","undefined","watch","old","apply_RegistSubDomain","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","clsName","_v","directives","rawName","value","expression","_s","label-width","label","placeholder","on","input","model","callback","$$v","slot","Boolean","_e","controls","controls-position","min","size","label-position","click","$event","preventDefault","apply","arguments","disabled","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/5.a23716adc2bde17cbfe2.js","sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"row justify-content-center pt-3\">\n      <div class=\"col-7 pb-2\">\n        <goback-nav clsName=\"sub-goback-nav\"/>\n      </div>\n      <div class=\"col-md-7 col-sm-10 bas-card\" v-loading=\"ctrl.loading\">\n        <div class=\"bas-card__header\">\n          <div class=\"bas-card__header-title\">\n            {{$t('p.DomainRegistSubTitle')}}\n          </div>\n        </div>\n        <div class=\"bas-gray-split\" />\n        <div class=\"bas-card__body bas-border-none\">\n          <el-form class=\"col-10\"\n            label-width=\"160px\">\n            <el-form-item :label=\"DomainLabel\" >\n              <el-input v-model=\"subText\"\n                 @input=\"changeLower\"\n                class=\"bas-regist--domain-input\"\n                placeholder=\"please enter domain...\">\n                <template slot=\"append\">{{ `.${showTopDomain}` }}</template>\n              </el-input>\n              <div class=\"bas-text-warning\" v-if=\"Boolean(errorMsg)\">\n                <i class=\"fa fa-warning\"></i>\n                {{errorMsg}}\n              </div>\n            </el-form-item>\n\n\n            <el-form-item :label=\"PriceLabel\" >\n              <span> {{ unitPrice }} </span>\n              <span> BAS/year </span>\n            </el-form-item>\n\n            <el-form-item :label=\"PurchaseYearsLabel\">\n              <el-input-number v-model=\"years\" name=\"years\"\n                :controls=\"true\"\n                controls-position=\"\"\n                :min=\"1\" :max=\"ruleState.maxRegYears\">\n              </el-input-number>\n              <span>Year</span>\n            </el-form-item>\n          </el-form>\n\n          <div class=\"row justify-content-center align-items-center\">\n            <el-form class=\"col-10 bas-topinfo-container\"\n              size=\"mini\" label-position=\"right\"\n              >\n              <el-form-item>\n                <h6 slot=\"label\" class=\"pt-2\">{{$t('p.DomainRegistSubRootInfoTitle')}}</h6>\n              </el-form-item>\n              <el-form-item\n                label-width=\"120px\" :label=\"RootDomainLabel\">\n                <span>{{ showTopDomain}}</span>\n                <span v-if=\"!topasset.owner\">{{ $t('l.Unregist')}}</span>\n              </el-form-item>\n              <el-form-item v-if=\"Boolean(topasset.owner)\"\n                label-width=\"120px\" :label=\"ExpireDateLabel\">\n                <span>{{ topExpireDate }}</span>\n              </el-form-item>\n              <el-form-item  v-if=\"topasset.owner !== ''\"\n                label-width=\"120px\">\n                <label slot=\"label\">\n                  {{$t('l.Owner')}}\n                </label>\n                <span>\n                {{ topasset.owner }}\n                </span>\n              </el-form-item>\n              <el-form-item v-if=\"topasset.owner !== ''\"\n                label-width=\"120px\">\n                <a slot=\"label\"\n                  class=\"bas-link topinfo-whois\"\n                  @click.prevent=\"gotoWhois\">\n                  Who is >>\n                </a>\n              </el-form-item>\n            </el-form>\n          </div>\n          <div class=\"col-12 text-center pt-3\">\n            <span class=\"bas-text-green\">{{$t('l.Total')}}:</span>\n            <h2 class=\"d-inline bas-text-green\">{{getTotal}}</h2>\n            <span class=\"bas-text-green\">BAS</span>\n          </div>\n        </div>\n        <div class=\"bas-card__footer\">\n          <button class=\"btn w-25 bas-btn-primary\"\n            :disabled=\"ctrl.loading\"\n            @click=\"commitRegist\">\n              {{$t('l.RegistBtn')}}\n            </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {\n  dateFormat,\n  handleDomain,toUnicodeDomain\n  ,diffBnFloat,\n  wei2Bas\n} from '@/utils'\n\nimport {\n  getDomainType,\n  CheckLegal,\n  MAX_AROOT_LEN,\n  CheckLegalRoot,\n} from '@/utils/Validator.js'\n\n\nimport {\n PARAM_ILLEGAL, LACK_OF_ETH,\n RPC_SERVER_ERROR,LACK_OF_TOKEN,\n ROOT_REGIST_CLOSE,\n DOMAIN_FORMAT_ILLEGAL,DOMAIN_HAS_TAKEN,\n DOMAIN_TOP_EXPIRED\n} from '@/web3-lib/api-errors.js'\nimport {isOwner} from '@/web3-lib/utils'\n\nimport {globalWebState} from '@/web3-lib'\nimport { findDomainInfo,hasTaken } from '@/web3-lib/apis/domain-api.js'\nimport {preCheck4Sub} from '@/web3-lib/apis/domains-apply.js'\n\nimport GobackNav from '@/components/GobackNav.vue'\n\n\nexport default {\n  name:\"DomainRegistSub\",\n  components:{\n    GobackNav\n  },\n  computed: {\n    getTotal(){\n      const total = parseFloat(this.unitPrice * this.years)\n      return total.toFixed(2)\n    },\n    topExpireDate(){\n      if(!this.topasset.expire) return ''\n      return dateFormat(this.topasset.expire,'YYYY-MM-DD HH:mm:ss')\n    },\n    showErrorTips(){\n      return (this.topasset.owner && !this.topasset.openApplied) || this.exist\n    },\n    showTopDomain(){\n      try{\n        return toUnicodeDomain(this.topasset.name)\n      }catch(ex){\n        return this.topasset.name\n      }\n    },\n    DomainLabel(){\n      return this.$t('l.Domain')\n    },\n    PriceLabel(){\n      return this.$t('l.PriceBas')\n    },\n    PurchaseYearsLabel(){\n      return this.$t('l.PurchaseYears')\n    },\n    RootDomainLabel(){\n      return this.$t('p.ApplyTabRootName')\n    },\n    ExpireDateLabel(){\n      return this.$t('p.DomainExpirationLable')\n    },\n    IsOwnerLabel(){\n      let text = this.topasset.owner ? this.$t('l.Owner') :`${this.$t('l.RootDomain')} ${this.topText}`\n      return text\n    },\n    ...Vuex.mapGetters({\n      ruleState:'dapp/ruleState'\n    }),\n    ...Vuex.mapState({\n      maxRegYears:state => state.dapp.maxRegYears\n    })\n  },\n  data() {\n    return {\n      topText:'',\n      subText:'',\n      years:1,\n      unitPrice:4,\n      exist:false,\n      topasset:{\n        name:'',\n        owner:''\n      },\n      errorMsg:'',\n      ctrl:{\n        loading:false\n      }\n    }\n  },\n  methods: {\n    goback(){\n      this.$router.go(-1)\n    },\n    setUnitPrice(){\n      const ruleState = this.$store.getters['dapp/ruleState']\n      const topasset = this.topasset\n      const expire = topasset.expire\n      const curTs = parseInt(new Date().getTime()/1000)\n      if(topasset.owner&&topasset.openApplied&&topasset.isCustomed && (expire - curTs) >0 ){\n        const customWei = topasset.customPrice\n        this.unitPrice =  customWei ? wei2Bas(customWei) : ruleState.subBas\n      }else{\n        this.unitPrice = ruleState.subBas\n      }\n    },\n    checkSubHasTaken(fullText,chainId){\n      hasTaken(fullText,chainId,false).then(b=>{\n        this.exist = b\n        this.errorMsg = b ? this.$t('p.DomainRegistSubHasTakenTips',{domaintext:fullText}) : ''\n      }).catch(ex=>{\n        console.log(ex)\n      })\n    },\n    changeLower(val){\n      //console.log(val)\n      if(val){\n        this.subText = (val+'').trim().toLowerCase()\n      }\n    },\n    validForm(){\n      let errMsg = ''\n      if(this.subText == ''){\n        this.$message(this.$basTip.error(this.$t('l.DomainInputTips')))\n        return false;\n      }\n      let fullText = this.subText\n      const web3State = this.$store.getters['web3State']\n      try{\n        if(this.topText == '')throw 10000;\n        fullText = `${this.subText}.${this.topText}`\n        if(this.exist)throw 10011;\n        CheckLegal(fullText)\n        if(this.topasset.owner &&\n          !this.topasset.openApplied &&\n          !isOwner(this.topasset.owner,web3State.wallet))throw 10012\n        return true;\n      }catch(ex){\n        //console.log(ex)\n        switch (ex) {\n          case 10000:\n            errMsg = `${fullText } `+ this.$t('l.Illegal')\n            this.$message(this.$basTip.error(errMsg))\n            break;\n          case 10001:\n            errMsg = this.$t('code.10001',{max:MAX_AROOT_LEN})\n            this.$message(this.$basTip.error(errMsg))\n            break;\n          case 10002:\n            errMsg = `${fullText} ` + this.$t('l.ErrorHasSpecialCharacter')\n            this.$message(this.$basTip.error(errMsg))\n            break;\n          case 10003:\n            errMsg = `${fullText} 域名超过二级`\n            this.$message(this.$basTip.error(errMsg))\n            break;\n          case 10004:\n            errMsg = `${fullText} ` + this.$t('l.ErrorHasUpperCase')\n            this.$message(this.$basTip.error(errMsg))\n            break;\n          case 10011:\n            errMsg = `${fullText} ` + this.$t('g.DomainExist')\n            this.$message(this.$basTip.error(errMsg))\n            break;\n          case 10012:\n            errMsg = `${fullText}` +this.$t('l.ErrorRootClosedRregist')\n            this.$message(this.$basTip.error(errMsg))\n            break;\n          default:\n            errMsg = `${fullText}` + this.$t('l.Illegal')\n            this.$message(this.$basTip.error(errMsg))\n            break;\n          return false;\n        }\n      }\n    },\n    async commitRegist(){\n      if(this.$store.getters['metaMaskDisabled']){\n        this.$metamask()\n        return;\n      }\n      if(this.validForm()){\n        const web3State = this.$store.getters['dapp/web3State']\n        let chainId = web3State.chainId;\n        let wallet = web3State.wallet;\n        let subText = this.subText;\n        let topText = this.topText\n\n        const preData = {\n          isSubDomain:true,\n          domainText:subText,\n          topText,\n          openApplied:false,\n          isCustomed:false,\n          customPriceWei:0,\n          costWei:0,\n          years:this.years,\n          chainId,\n          wallet\n        }\n        let subErrMsg = ''\n\n\n        try{\n          this.ctrl.loading = true\n          const resp = await preCheck4Sub(topText,subText,this.years,chainId,wallet)\n          const commitData = Object.assign({},preData,{hash:resp.hash,costWei:resp.costwei})\n\n          console.log(\"Regist Sub Data\",commitData)\n\n          this.$router.push({\n            name:'domain.applyresult',\n            params:{\n              commitData\n            }\n          })\n        }catch(ex){\n          this.ctrl.loading = false\n          let msg = ''\n          switch (ex) {\n            case DOMAIN_HAS_TAKEN:\n            case DOMAIN_FORMAT_ILLEGAL:\n              msg = this.$t(`code.${ex}`,{text:subText})\n              this.$message(this.$basTip.error(msg))\n              return\n            case ROOT_REGIST_CLOSE:\n            case DOMAIN_TOP_EXPIRED:\n              msg = this.$t(`code.${ex}`,{text:topText})\n              this.$message(this.$basTip.error(msg))\n              return\n\n            case LACK_OF_TOKEN:\n            case LACK_OF_ETH:\n              this.$message(this.$basTip.error(this.$t(`code.${ex}`)))\n               return\n\n            case DOMAIN_FORMAT_ILLEGAL:\n              console.error(ex)\n              return\n            default:\n              break;\n          }\n\n          console.error(ex)\n        }\n      }\n    },\n    gotoWhois(){\n      if(this.topasset.owner&& this.topasset.name){\n        this.$router.push({\n          path:`/domain/detail/${this.topasset.name}`\n        })\n      }\n    }\n  },\n  async mounted() {\n    //let ruleState = this.$store.getters['web3/ruleState']\n    //this.ruleState = Object.assign({},ruleState)\n\n    const web3State = await globalWebState()\n    const params = this.$route.params\n    const topText = params.topText\n    this.topText = topText\n    this.subText = params.subText||''\n    console.log('Params',params,web3State)\n\n    this.topasset = Object.assign(this.topasset,{name:topText});\n    const chainId = web3State.chainId;\n\n    if(topText){\n      findDomainInfo(topText,chainId).then(resp=>{\n        console.log('topasset',resp)\n        if(resp.state){\n          this.topasset = Object.assign({},resp.assetinfo);\n        }\n        this.setUnitPrice()\n      }).catch(ex=>{\n        console.log(ex)\n        this.setUnitPrice()\n      })\n\n      if(this.subText && topText !== undefined){\n        const fullText = `${this.subText}.${topText}`\n        this.checkSubHasTaken(fullText,chainId)\n      }\n    }\n  },\n  watch: {\n    subText:function(val,old){\n      const topText = this.topText\n      const web3State = this.$store.getters['dapp/web3State']\n      console.log(\">>>>>\",val,topText,web3State.chainId)\n      if(val !== ''&& topText !== '' && web3State.chainId){\n        const fullText = `${val}.${topText}`\n        this.checkSubHasTaken(fullText,web3State.chainId)\n      }\n    }\n  },\n}\n</script>\n<style>\n.bas-topinfo-container {\n  margin-left: 1.375rem;\n  background: rgba(245,246,246,1);\n}\n.bas-topinfo-container > div.el-form-item--mini.el-form-item{\n  margin-bottom: .05rem;\n}\n.topinfo-whois {\n  font-size: 18px;\n  font-weight: 400;\n}\n\ndiv.bas-goback-nav.sub-goback-nav{\n  background: rgba(255,255,250,1);\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/Domain/apply/RegistSubDomain.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"row justify-content-center pt-3\"},[_c('div',{staticClass:\"col-7 pb-2\"},[_c('goback-nav',{attrs:{\"clsName\":\"sub-goback-nav\"}})],1),_vm._v(\" \"),_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.ctrl.loading),expression:\"ctrl.loading\"}],staticClass:\"col-md-7 col-sm-10 bas-card\"},[_c('div',{staticClass:\"bas-card__header\"},[_c('div',{staticClass:\"bas-card__header-title\"},[_vm._v(\"\\n          \"+_vm._s(_vm.$t('p.DomainRegistSubTitle'))+\"\\n        \")])]),_vm._v(\" \"),_c('div',{staticClass:\"bas-gray-split\"}),_vm._v(\" \"),_c('div',{staticClass:\"bas-card__body bas-border-none\"},[_c('el-form',{staticClass:\"col-10\",attrs:{\"label-width\":\"160px\"}},[_c('el-form-item',{attrs:{\"label\":_vm.DomainLabel}},[_c('el-input',{staticClass:\"bas-regist--domain-input\",attrs:{\"placeholder\":\"please enter domain...\"},on:{\"input\":_vm.changeLower},model:{value:(_vm.subText),callback:function ($$v) {_vm.subText=$$v},expression:\"subText\"}},[_c('template',{slot:\"append\"},[_vm._v(_vm._s((\".\" + _vm.showTopDomain)))])],2),_vm._v(\" \"),(Boolean(_vm.errorMsg))?_c('div',{staticClass:\"bas-text-warning\"},[_c('i',{staticClass:\"fa fa-warning\"}),_vm._v(\"\\n              \"+_vm._s(_vm.errorMsg)+\"\\n            \")]):_vm._e()],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":_vm.PriceLabel}},[_c('span',[_vm._v(\" \"+_vm._s(_vm.unitPrice)+\" \")]),_vm._v(\" \"),_c('span',[_vm._v(\" BAS/year \")])]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":_vm.PurchaseYearsLabel}},[_c('el-input-number',{attrs:{\"name\":\"years\",\"controls\":true,\"controls-position\":\"\",\"min\":1,\"max\":_vm.ruleState.maxRegYears},model:{value:(_vm.years),callback:function ($$v) {_vm.years=$$v},expression:\"years\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"Year\")])],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"row justify-content-center align-items-center\"},[_c('el-form',{staticClass:\"col-10 bas-topinfo-container\",attrs:{\"size\":\"mini\",\"label-position\":\"right\"}},[_c('el-form-item',[_c('h6',{staticClass:\"pt-2\",attrs:{\"slot\":\"label\"},slot:\"label\"},[_vm._v(_vm._s(_vm.$t('p.DomainRegistSubRootInfoTitle')))])]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label-width\":\"120px\",\"label\":_vm.RootDomainLabel}},[_c('span',[_vm._v(_vm._s(_vm.showTopDomain))]),_vm._v(\" \"),(!_vm.topasset.owner)?_c('span',[_vm._v(_vm._s(_vm.$t('l.Unregist')))]):_vm._e()]),_vm._v(\" \"),(Boolean(_vm.topasset.owner))?_c('el-form-item',{attrs:{\"label-width\":\"120px\",\"label\":_vm.ExpireDateLabel}},[_c('span',[_vm._v(_vm._s(_vm.topExpireDate))])]):_vm._e(),_vm._v(\" \"),(_vm.topasset.owner !== '')?_c('el-form-item',{attrs:{\"label-width\":\"120px\"}},[_c('label',{attrs:{\"slot\":\"label\"},slot:\"label\"},[_vm._v(\"\\n                \"+_vm._s(_vm.$t('l.Owner'))+\"\\n              \")]),_vm._v(\" \"),_c('span',[_vm._v(\"\\n              \"+_vm._s(_vm.topasset.owner)+\"\\n              \")])]):_vm._e(),_vm._v(\" \"),(_vm.topasset.owner !== '')?_c('el-form-item',{attrs:{\"label-width\":\"120px\"}},[_c('a',{staticClass:\"bas-link topinfo-whois\",attrs:{\"slot\":\"label\"},on:{\"click\":function($event){$event.preventDefault();return _vm.gotoWhois.apply(null, arguments)}},slot:\"label\"},[_vm._v(\"\\n                Who is >>\\n              \")])]):_vm._e()],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"col-12 text-center pt-3\"},[_c('span',{staticClass:\"bas-text-green\"},[_vm._v(_vm._s(_vm.$t('l.Total'))+\":\")]),_vm._v(\" \"),_c('h2',{staticClass:\"d-inline bas-text-green\"},[_vm._v(_vm._s(_vm.getTotal))]),_vm._v(\" \"),_c('span',{staticClass:\"bas-text-green\"},[_vm._v(\"BAS\")])])],1),_vm._v(\" \"),_c('div',{staticClass:\"bas-card__footer\"},[_c('button',{staticClass:\"btn w-25 bas-btn-primary\",attrs:{\"disabled\":_vm.ctrl.loading},on:{\"click\":_vm.commitRegist}},[_vm._v(\"\\n            \"+_vm._s(_vm.$t('l.RegistBtn'))+\"\\n          \")])])])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0006ecf1\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/Domain/apply/RegistSubDomain.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0006ecf1\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./RegistSubDomain.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./RegistSubDomain.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./RegistSubDomain.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0006ecf1\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./RegistSubDomain.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/Domain/apply/RegistSubDomain.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}