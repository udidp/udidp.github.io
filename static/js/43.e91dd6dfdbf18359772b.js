webpackJsonp([43],{Y6x4:function(t,e){},"rsb/":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("Xxa5"),i=a.n(r),s=a("exGp"),n=a.n(s),l=a("woOf"),o=a.n(l),c=a("Dd8w"),d=a.n(c),u=a("0xDb"),p=a("JX3P"),b=a("82Js"),m=a("U/4D"),h=a("g1m8"),g=a("J3VU"),v={name:"MailServers",components:{LoadingDot:h.a,ElTabLoading:g.a},computed:d()({},Vuex.mapState({items:function(t){return t.ewallet.assets.filter(function(t){return t.mailActived})},syncState:function(t){return t.ewallet.assetsLoading},chainId:function(t){return t.dapp.chainId}}),{curWallet:function(){return this.$store.state.dapp.wallet}}),data:function(){return{loading:!1,maskDialog:{visible:!1,loading:!1,hash:null,title:"",contents:""}}},methods:{domainMailFormat:function(t,e,a){return"@"+a},expireFormat:function(t,e,a){return Object(u.h)(a)},mailPublicFormat:function(t,e,a){return a?this.$t("g.Y"):this.$t("g.N")},showMaskDialog:function(t,e,a){this.maskDialog=o()({},this.maskDialog,{visible:!0,loading:e,hash:t,title:a,contents:""})},hideMaskDialog:function(){this.maskDialog=o()({},this.maskDialog,{visible:!1,loading:!1,hash:"",title:"",contents:""})},gotoDetail:function(){},goMailConf:function(t,e){var a=e.domaintext;this.$store.getters.metaMaskDisabled?this.$metamask():this.$router.push({path:"/mail/mailsvr/"+a,name:"mail.mailsvr",params:{domaintext:a,hash:e.hash}})},cancelMailPublic:function(t,e){var a=this;return n()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.$store.getters.metaMaskDisabled){t.next=3;break}return a.$metamask(),t.abrupt("return");case 3:if(e.hash){t.next=7;break}return t.abrupt("return");case 7:return t.next=9,a.toggleMailServicPublic(e,!1);case 9:case"end":return t.stop()}},t,a)}))()},enableMailPublic:function(t,e){var a=this;return n()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.$store.getters.metaMaskDisabled){t.next=3;break}return a.$metamask(),t.abrupt("return");case 3:if(e.hash){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,a.toggleMailServicPublic(e,!0);case 8:case"end":return t.stop()}},t,a)}))()},toggleMailServicPublic:function(t,e){var a=this;return n()(i.a.mark(function r(){var s,n,l,o,c,d,u,m;return i.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return s=a.$store.getters.web3State,n=s.chainId,l=s.wallet,o=t.domaintext,c=t.hash,r.prev=5,d=a.$t(e?"p.OpenMailServiceToPublic":"p.ColseMailServiceToPublic",{domaintext:o}),a.showMaskDialog(c,!0,d),r.next=10,Object(b.i)(c,e,n,l);case 10:u=r.sent,a.$store.dispatch("ewallet/updateEWalletAssetsIndexedDB",u),a.hideMaskDialog(),r.next=36;break;case 15:r.prev=15,r.t0=r.catch(5),m="",r.t1=r.t0,r.next=r.t1===p.z?21:r.t1===p.F?23:r.t1===p.e?26:r.t1===p.n?26:r.t1===p.a?29:32;break;case 21:return r.abrupt("return");case 23:return m=a.$t("code."+r.t0),a.$message(a.$basTip.error(m)),r.abrupt("break",33);case 26:return m=a.$t("code."+r.t0,{domaintext:o}),a.$message(a.$basTip.error(m)),r.abrupt("break",33);case 29:return m=a.$t("code."+r.t0,{wallet:l,asset:o}),a.$message(a.$basTip.error(m)),r.abrupt("break",33);case 32:return r.abrupt("break",33);case 33:r.t0.code===p.G&&(m=a.$t("code."+r.t0.code),a.$message(a.$basTip.error(m))),a.hideMaskDialog();case 36:case"end":return r.stop()}},r,a,[[5,15]])}))()},closeMailService:function(t,e){var a=this;return n()(i.a.mark(function t(){var r,s,n,l,o,c,d,u;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.$store.getters.metaMaskDisabled){t.next=3;break}return a.$metamask(),t.abrupt("return");case 3:if(r=a.$store.getters.web3State,s=r.chainId,n=r.wallet,l=e.domaintext,o=e.hash){t.next=11;break}return t.abrupt("return");case 11:return t.prev=11,c=a.$t("p.DisableMailService",{domaintext:l}),a.showMaskDialog(o,!0,c),t.next=16,Object(b.h)(o,s,n);case 16:d=t.sent,a.$store.dispatch("ewallet/updateEWalletAssetsIndexedDB",d),a.hideMaskDialog(),t.next=41;break;case 22:t.prev=22,t.t0=t.catch(11),a.hideMaskDialog(),u="",t.t1=t.t0,t.next=t.t1===p.F?30:t.t1===p.e?33:t.t1===p.a?36:39;break;case 30:return u=a.$t("code."+t.t0),a.$message(a.$basTip.error(u)),t.abrupt("break",40);case 33:return u=a.$t("code."+t.t0,{domaintext:l}),a.$message(a.$basTip.error(u)),t.abrupt("break",40);case 36:return u=a.$t("code."+t.t0,{wallet:n,asset:l}),a.$message(a.$basTip.error(u)),t.abrupt("break",40);case 39:return t.abrupt("break",40);case 40:t.t0.code===p.G&&(u=a.$t("code."+t.t0.code),a.$message(a.$basTip.error(u)));case 41:case"end":return t.stop()}},t,a,[[11,22]])}))()},reloadRecords:function(){var t=this.$store.getters.web3State;t.chainId&&Object(m.a)(t.chainId)&&t.wallet&&this.$store.dispatch("ewallet/syncEWalletAssets",t)}},beforeMount:function(){var t=this.$store.getters.web3State;t.chainId&&Object(m.a)(t.chainId)&&t.wallet&&this.$store.dispatch("ewallet/syncEWalletAssets",t)},mounted:function(){},watch:{curWallet:function(t,e){Object(m.a)(this.chainId)&&this.$store.dispatch("ewallet/syncEWalletAssets",{chainId:this.chainId,wallet:t})},chainId:function(t,e){var a=this.$store.state.dapp.wallet;Object(m.a)(t)&&a&&this.$store.dispatch("ewallet/syncEWalletAssets",{chainId:t,wallet:a})}}},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{type:"index",data:t.items},on:{"cell-click":t.gotoDetail}},[a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"domaintext",index:"domain",formatter:t.domainMailFormat,label:t.$t("l.EWalletDomainMailServers")}}),t._v(" "),a("el-table-column",{attrs:{prop:"expire","header-align":"center",align:"center",sortable:"","sort-orders":"descending",label:t.$t("l.ExpiredDate"),formatter:t.expireFormat}}),t._v(" "),a("el-table-column",{attrs:{prop:"mailPublic","header-align":"center",align:"center",sortable:"",label:t.$t("l.MailIsOpenPublic"),formatter:t.mailPublicFormat}}),t._v(" "),a("el-table-column",{attrs:{"header-align":"center",index:"operate","class-name":"el-tbc-operator",align:"center",label:t.$t("l.Operating")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-dropdown",[a("el-button",{attrs:{size:"mini",type:"default"}},[t._v("\n            "+t._s(t.$t("l.MoreOperation"))+" "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:e.row,disabled:e.row.hasExpired},nativeOn:{click:function(a){return t.goMailConf(e.$index,e.row)}}},[t._v("\n              "+t._s(t.$t("l.UpdateConfiguration"))+"\n            ")]),t._v(" "),e.row.mailPublic?a("el-dropdown-item",{nativeOn:{click:function(a){return t.cancelMailPublic(e.$index,e.row)}}},[t._v("\n              "+t._s(t.$t("l.CancelMailToPublic"))+"\n            ")]):t._e(),t._v(" "),a("el-dropdown-item",{attrs:{disabled:e.row.rechargeYears<=0},nativeOn:{click:function(a){return t.closeMailService(e.$index,e.row)}}},[t._v("\n              "+t._s(t.$t("l.DisableMailService"))+"\n            ")])],1)],1),t._v(" "),e.row.mailPublic||!e.row.isRare||e.row.isorder?t._e():a("el-button",{attrs:{size:"mini",type:e.row.isorder?"default":"primary"},on:{click:function(a){return t.enableMailPublic(e.$index,e.row)}}},[t._v("\n          "+t._s(t.$t("l.OpenMailToPublic"))+"\n        ")])]}}])}),t._v(" "),t.syncState?a("el-tab-loading",{attrs:{slot:"empty",loading:t.syncState},slot:"empty"}):t._e(),t._v(" "),t.syncState&&t.items.length>0?a("el-tab-loading",{attrs:{slot:"append",loading:t.syncState},slot:"append"}):t._e()],1),t._v(" "),a("el-row",{staticClass:"bg-white",staticStyle:{margin:"0px"},attrs:{gutter:20}},[a("div",{staticClass:"bg-white",staticStyle:{height:"25px"}}),t._v(" "),a("div",{staticClass:"float-table-total"},[a("span",[t._v("\n        "+t._s(t.$t("l.TableTotal"))+" "+t._s(t.items?t.items.length:0)+" "+t._s(t.$t("l.TableRecord"))+"\n      ")]),t._v(" "),a("span",{on:{click:t.reloadRecords}},[a("i",{staticClass:"fa fa-refresh"})])])]),t._v(" "),a("el-dialog",{attrs:{width:"25%","close-on-click-modal":!1,"show-close":!t.maskDialog.loading,visible:t.maskDialog.visible},on:{"update:visible":function(e){return t.$set(t.maskDialog,"visible",e)}}},[a("div",{attrs:{slot:"title"},slot:"title"},[a("span",{staticStyle:{"margin-left":"10px"}},[t._v("\n        "+t._s(t.maskDialog.title)+"\n      ")])]),t._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-10 text-center"},[a("h5",[t._v("\n            "+t._s(t.$t("l.TransactionTip"))+"\n          ")])])])]),t._v(" "),a("div",{staticClass:"dialog-footer bas-dialog-between",attrs:{slot:"footer"},slot:"footer"},[a("div"),t._v(" "),a("div",{staticClass:"left-tips pr-3"},[a("span",{staticClass:"bas-dialog-footer--tips"},[t.maskDialog.loading?a("loading-dot",{staticStyle:{float:"right"}}):t._e()],1)])])])],1)},staticRenderFns:[]};var w=a("VU/8")(v,f,!1,function(t){a("Y6x4")},null,null);e.default=w.exports}});
//# sourceMappingURL=43.e91dd6dfdbf18359772b.js.map