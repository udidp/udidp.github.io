{"version":3,"sources":["webpack:///src/views/Domain/Regist.vue","webpack:///./src/views/Domain/Regist.vue?54de","webpack:///./src/views/Domain/Regist.vue"],"names":["Regist","name","data","domain","unitPrice","years","openState","domainType","subUnitPrice","customedCheck","commitTop","openApplied","isCustomed","customedPrice","topData","owner","expire","error","configs","decimals","rareGas","topGas","subGas","customedPriceGas","maxYearReg","ruleState","mounted","this","$route","params","Object","Validator","$store","getters","assign_default","cfg","computed","getSubGasWarn","showSubGasWarn","showSubConfig","showTopDomainInfo","getDomainTypeShow","type","$t","showRootInfo","getTotal","baseSum","subUnitPriceEnable","getTopExpireDate","utils","methods","topExist","queryDomain","text","queryDomainByName","then","ret","state","catch","ex","domain_validator","resetTopData","defaultPrice","setSubUnitPrice","price","domainChanged","_this","topText","domain_api","resp","setDomainType","gotoWhois","$metamask","$router","push","path","openSubApply","closeSubApply","registing","_this2","asyncToGenerator_default","regenerator_default","a","mark","_callee","errMsg","handleText","dType","dappState","exsitResp","domainStruct","customPriceWei","year","wallet","wrap","_context","prev","next","$message","$basTip","abrupt","sent","exist","fullDomain","topDomain","top","registSub","basBal","Math","pow","Boolean","registTop","stop","_this3","isValid","basBalance","cost","commitData","isSubdomain","costWei","warnMsg","_ref","_this4","web3","warn","watch","val","that","setTimeout","Domain_Regist","render","_vm","_h","$createElement","_c","_self","staticClass","_m","_v","attrs","label-width","label","placeholder","model","value","callback","$$v","expression","slot","_s","_e","on","change","directives","rawName","show-message","precision","step","controls-position","disabled","min","max","staticStyle","margin-left","click","$event","preventDefault","apply","arguments","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/57.0f28c3045c6a4e4971d2.js","sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"row justify-content-center\">\n      <div class=\"col-7 bas-card\">\n        <div class=\"bas-card__header\">\n          <div class=\"bas-card__header-title\">\n            注册域名\n          </div>\n        </div>\n        <div class=\"bas-gray-split\" />\n        <div class=\"bas-card__body bas-border-none\">\n          <el-form class=\"col-10\" label-width=\"160px\">\n            <el-form-item label=\"域名\" >\n              <el-input v-model=\"domain\"\n                class=\"bas-regist--domain-input\"\n                placeholder=\"please enter domain...\">\n                <template slot=\"append\">{{ getDomainTypeShow }}</template>\n              </el-input>\n              <div class=\"bas-text-warning\" v-if=\"!topData.openApplied\">\n                <i class=\"fa fa-warning\"></i>\n                此根域名暂不支持二级域名注册，根域名所有者未开放注册权限\n              </div>\n            </el-form-item>\n\n            <el-form-item v-if=\"false\" label=\"别名\" class=\"w-50\">\n              <el-input placeholder=\"Please enter alias...\" v-model=\"alias\"></el-input>\n            </el-form-item>\n\n            <el-form-item label=\"价格\" >\n              <span> {{unitPrice}} </span>\n              <span> BAS/year </span>\n            </el-form-item>\n            <el-form-item label=\"是否开放二级域名注册\" v-if=\"showSubConfig\">\n              <template>\n                <el-radio v-model=\"openState\" label=\"\" @change=\"closeSubApply\">否</el-radio>\n                <el-radio v-model=\"openState\" label=\"1\"  @change=\"openSubApply\">是</el-radio>\n              </template>\n            </el-form-item>\n            <el-form-item label=\"二级域名价格\"\n              :error=\"getSubGasWarn\"\n              :show-message=\"customedCheck\"\n              v-show=\"showSubConfig && (!!openState)\">\n\n              <el-input-number v-model=\"subUnitPrice\" name=\"subUnitPrice\"\n                :precision=\"2\" :step=\"1.0\"\n                controls-position=\"right\" :disabled=\"!this.customedCheck\"\n                :min=\"configs.subGas\" >\n              </el-input-number>\n              <el-checkbox v-model=\"customedCheck\" class=\"bas-domain--setprice-tip\">\n                Notice: 如开启自定义价格，将额外收取{{configs.customedPriceGas}}BAS\n              </el-checkbox>\n            </el-form-item>\n            <div>\n\n            </div>\n            <el-form-item label=\"购买期限\">\n              <el-input-number v-model=\"years\" name=\"years\"\n                controls-position=\"right\"\n                :min=\"1\" :max=\"configs.maxYearReg\">\n              </el-input-number>\n              <span>Year</span>\n            </el-form-item>\n          </el-form>\n\n          <div v-if=\"showTopDomainInfo\"\n            class=\"bas-regist--topdomain-container\">\n            <h5 class=\"\">根域名信息</h5>\n            <div class=\"bas-inline-flex\">\n              <div class=\"bas-label-100\" >到期日期:</div>\n              <span>{{getTopExpireDate}}</span>\n            </div>\n            <div class=\"bas-inline-flex\">\n              <div class=\"bas-label-100\">所有者:</div>\n              <span>{{this.topData.owner}}</span>\n              <a class=\"bas-link bas-small\" @click.prevent=\"gotoWhois\" style=\"margin-left:1.5rem;\">\n                Who is >>\n              </a>\n            </div>\n          </div>\n\n          <div class=\"col-12 text-center\">\n            <span class=\"bas-text-green\">总计:</span>\n            <h2 class=\"d-inline bas-text-green\">{{getTotal}}</h2>\n            <span class=\"bas-text-green\">BAS</span>\n          </div>\n        </div>\n        <div class=\"bas-card__footer\">\n          <button class=\"btn w-25 bas-btn-primary\" @click=\"registing\">注册</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<style>\n\n\n.bas-regist--domain-container {\n  width: 60%;\n}\n.bas-regist--topdomain-container{\n  margin-left: 1.375rem;\n}\n.bas-regist--topdomain-container >p:not(:nth-last-child(1)) {\n  margin-bottom: .25rem;\n  padding: .25rem 0 !important;\n  line-height: 1rem !important;\n}\n\n\n</style>\n<script>\nimport {\n  checkDomainIllegal,\n  isRareDomain,\n  isSubdomain,\n  getTopDomain,\n  getSplitDomain,\n }  from '@/utils/domain-validator'\nimport {getDomainTopType ,getDomainType} from '@/utils/Validator.js'\nimport {\n  findDomainByName,\n  validExistDomain,\n  calcSubCost,\n  calcTopCost,\n} from '@/bizlib/web3/domain-api.js'\n\nimport { dateFormat,diffDays,diffBn,handleDomain } from '@/utils'\n\nexport default {\n  name:\"DomainRegist\",\n  data(){\n    return {\n      domain:\"\",\n      unitPrice:20,\n      years:1,\n      openState:\"1\",\n      domainType:'',\n      subUnitPrice:4,\n      customedCheck:false,\n      commitTop:{\n        openApplied:false,\n        isCustomed:false,\n        customedPrice:4\n      },\n      topData:{\n        domain:'',\n        owner:'',\n        expire:'',\n        openApplied:true,\n        isCustomed:false,\n        customedPrice:4\n      },\n      error:'',\n      configs:{\n        decimals:18,\n        rareGas:5000 ,\n        topGas:20 ,\n        subGas:4 ,\n        customedPriceGas:100,\n        maxYearReg:5,\n      },\n      ruleState:{\n\n      }\n    }\n  },\n  mounted(){\n    const domain = this.$route.params.domain\n    this.domain = domain||''\n    this.domainType = getDomainTopType(domain)\n     //getDomainType(domain)\n    const ruleState = this.$store.getters['web3/ruleState']\n    this.ruleState = Object.assign({},ruleState)\n    let cfg = this.$store.getters['web3/getOANNConfigs']\n    this.subUnitPrice = cfg.subGas\n    this.configs = Object.assign({},this.configs,cfg)\n\n  },\n  computed:{\n    getSubGasWarn(){\n      let v = this.configs.subGas\n      return `最低不能少于${v} BAS.`\n    },\n    showSubGasWarn(){\n      let f = this.customedCheck && this.subUnitPrice <=4\n      return f;\n    },\n    showSubConfig(){\n      const dTpye =  getDomainType(this.domain)\n      return dTpye !== 'subdomain'\n    },\n    showTopDomainInfo(){\n      return !!this.topData.owner\n    },\n    getDomainTypeShow(){\n      if(!this.domain)return  ''\n      let type = getDomainType(this.domain)\n      return this.$t(`g.${type}`)\n    },\n    showRootInfo(){\n      return this.openState\n    },\n    getTotal(){\n      let baseSum = this.years * this.unitPrice;\n      return this.customedCheck&&this.openState ? baseSum + this.configs.customedPriceGas : baseSum;\n    },\n    subUnitPriceEnable(){\n      return !this.openState\n    },\n    getTopExpireDate(){\n      if(!this.topData.expire)return ''\n      return dateFormat(this.topData.expire)\n    },\n  },\n  methods:{\n    topExist(){\n      return this.topData.owner && this.topData.expire\n    },\n    queryDomain(text){\n      if(this.$store.getters['metaMaskDisabled'] && !text) return;\n      queryDomainByName(text).then(ret=>{\n        if(ret.state){\n\n        }else{\n\n        }\n      }).catch(ex=>{\n        console.log(ex)\n      })\n\n      //Top\n      if(isSubdomain(text)){\n\n      }\n    },\n    resetTopData(defaultPrice){\n        this.topData.owner=''\n        this.topData.expire=''\n        this.topData.openApplied=true,\n        this.topData.isCustomed=false,\n        this.topData.customedPrice=defaultPrice ||this.configs.subGas\n    },\n    setSubUnitPrice(price){\n      this.subUnitPrice = price;\n    },\n    domainChanged(text){\n      console.log('>>>>',text)\n      if(checkDomainIllegal(text)){\n        this.domainType = 'illegal'\n        return;\n      }\n      this.domainType = getDomainType(text)\n      if(isSubdomain(text)){\n        //sub\n        this.unitPrice = this.configs.subGas;\n\n        let topText = getTopDomain(text)\n        this.topData.domain = topText;\n        let openAsync = true\n        if(openAsync && topText){\n          findDomainByName(topText).then(resp=>{\n            if(resp.state){\n              this.topData.expire = resp.data.expire\n              this.topData.owner = resp.data.owner\n              this.topData.openApplied = resp.data.openApplied;\n              this.topData.isCustomed = resp.data.isCustomed\n              this.topData.customedPrice = resp.data.customedPrice\n\n              if(resp.data.openApplied && resp.data.isCustomed && resp.data.customedPrice){\n                this.unitPrice = resp.data.customedPrice\n              }\n            }else{\n              this.resetTopData()\n            }\n          }).catch(ex=>{\n            this.resetTopData()\n          })\n        }\n      }else{\n        //top\n        this.unitPrice = isRareDomain(text) ? this.configs.rareGas : this.configs.topGas;\n        this.resetTopData()\n      }\n    },\n    setDomainType(domain){\n      this.domainType = getDomainType(domain)\n    },\n    gotoWhois(){\n      if(!this.topData.domain)return;\n      if(this.$store.getters['metaMaskDisabled']){\n        this.$metamask()\n        return;\n      }\n      this.$router.push({\n        path:`/domain/detail/${this.topData.domain}`\n      })\n    },\n    openSubApply(){\n      if(!!this.openState)this.subUnitPrice =this.topData.customedPrice\n    },\n    closeSubApply(){\n      if(!this.openState)this.subUnitPrice =this.configs.subGas;\n    },\n\n    // the Regist all enter\n    async registing(){\n      let errMsg = ''\n      if(!this.domain){\n        errMsg = \"域名为空,\"+ this.$t('g.illegal')\n        this.$message(this.$basTip.error(errMsg))\n      }\n      let handleText = handleDomain(this.domain)\n      let dType = getDomainType(handleText)\n      if(dType == 'illegal'){\n        errMsg = this.domain +\" \"+ this.$t('g.illegal')\n        this.$message(this.$basTip.error(errMsg))\n        return;\n      }\n\n      if(this.$store.getters['metaMaskDisabled']){\n        this.$metamask()\n        return;\n      }\n\n      let dappState = this.$store.getters['web3/dappState']\n\n      //exist check\n      let exsitResp = await validExistDomain(handleText)\n\n      if(exsitResp.exist && exsitResp.owner){\n        this.$message(\n          this.$basTip.error(\n            `${this.domain}域名已存在,请选用其他域名注册!`\n          ))\n        return;\n      }\n\n      if(dType === 'subdomain'){\n        let domainStruct = getSplitDomain(handleText)\n        let params = {\n          fullDomain:handleText,\n          domain:domainStruct.domain,\n          topDomain:domainStruct.top,\n          year:this.years\n        }\n        this.registSub(params,dappState.basBal,18)\n      }else{\n        let decimals = this.configs.decimals||18;\n        let customPriceWei = this.subUnitPrice * (10**decimals)\n        let domain = this.domain\n        let openApplied = Boolean(this.openState)\n        let isCustomed = !!this.customedCheck\n        let year = this.years;\n        let wallet = dappState.wallet;\n\n        this.registTop(\n          handleText,openApplied,isCustomed,\n          customPriceWei,year,wallet,decimals\n        )\n        //this.$alter('Come Soon...')\n      }\n    },\n    registTop(\n      domain,openApplied,isCustomed,\n      customPriceWei,year,wallet,decimals){\n\n      calcTopCost(domain,isCustomed,year,wallet).then(resp=>{\n        if(!resp.isValid){\n          this.$message(this.$basTip.error('预估校验未通过'))\n          return;\n        }\n        console.log(resp)\n        let basBalance = resp.basBalance\n        if(!diffBn( resp.basBalance , resp.cost, decimals )){\n          let warnMsg = this.$t('g.LackOfBasBalance')\n          this.$message(this.$basTip.error(warnMsg))\n          return;\n        }\n        let commitData = {\n          isSubdomain:false,\n          costWei:resp.cost,\n          domain,\n          openApplied,\n          isCustomed,\n          customPriceWei,\n          year\n        }\n        console.log('CommitData>>',commitData)\n        this.$router.push({\n          name:'domain.newtopregisting',\n          params:{\n            commitData\n          }\n        })\n      }).catch(ex=>{\n        console.log('>>',ex)\n      })\n    },\n    registSub({\n      fullDomain,\n      domain,\n      topDomain,\n      year},basBal,decimals){\n\n      let basBalance = this.$store.state.web3.basBal;\n      calcSubCost(year,domain,topDomain).then(ret =>{\n        let cost = ret.cost;\n        if( !diffBn (basBal,cost,decimals)){\n          let warnMsg = this.$t('g.LackOfBasBalance')\n          this.$message(this.$basTip.warn(warnMsg))\n          return;\n        }\n        let commitData = {\n          isSubdomain:true,\n          costWei:ret.cost,\n          domain,\n          topDomain,\n          year\n        }\n        //check balance >= cost\n\n        this.$router.push({\n          name:'domain.newregisting',\n          params:{\n            commitData\n          }\n        })\n      }).catch(ex=>{\n        console.log(ex)\n      })\n    }\n  },\n  watch:{\n    domain:function (val) {\n      let that = this;\n      setTimeout(()=>{\n        that.domainChanged(val)\n      },1000)\n    },\n\n  }\n}\n</script>\n\n\n\n\n// WEBPACK FOOTER //\n// src/views/Domain/Regist.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"row justify-content-center\"},[_c('div',{staticClass:\"col-7 bas-card\"},[_vm._m(0),_vm._v(\" \"),_c('div',{staticClass:\"bas-gray-split\"}),_vm._v(\" \"),_c('div',{staticClass:\"bas-card__body bas-border-none\"},[_c('el-form',{staticClass:\"col-10\",attrs:{\"label-width\":\"160px\"}},[_c('el-form-item',{attrs:{\"label\":\"域名\"}},[_c('el-input',{staticClass:\"bas-regist--domain-input\",attrs:{\"placeholder\":\"please enter domain...\"},model:{value:(_vm.domain),callback:function ($$v) {_vm.domain=$$v},expression:\"domain\"}},[_c('template',{slot:\"append\"},[_vm._v(_vm._s(_vm.getDomainTypeShow))])],2),_vm._v(\" \"),(!_vm.topData.openApplied)?_c('div',{staticClass:\"bas-text-warning\"},[_c('i',{staticClass:\"fa fa-warning\"}),_vm._v(\"\\n              此根域名暂不支持二级域名注册，根域名所有者未开放注册权限\\n            \")]):_vm._e()],1),_vm._v(\" \"),(false)?_c('el-form-item',{staticClass:\"w-50\",attrs:{\"label\":\"别名\"}},[_c('el-input',{attrs:{\"placeholder\":\"Please enter alias...\"},model:{value:(_vm.alias),callback:function ($$v) {_vm.alias=$$v},expression:\"alias\"}})],1):_vm._e(),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"价格\"}},[_c('span',[_vm._v(\" \"+_vm._s(_vm.unitPrice)+\" \")]),_vm._v(\" \"),_c('span',[_vm._v(\" BAS/year \")])]),_vm._v(\" \"),(_vm.showSubConfig)?_c('el-form-item',{attrs:{\"label\":\"是否开放二级域名注册\"}},[[_c('el-radio',{attrs:{\"label\":\"\"},on:{\"change\":_vm.closeSubApply},model:{value:(_vm.openState),callback:function ($$v) {_vm.openState=$$v},expression:\"openState\"}},[_vm._v(\"否\")]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":\"1\"},on:{\"change\":_vm.openSubApply},model:{value:(_vm.openState),callback:function ($$v) {_vm.openState=$$v},expression:\"openState\"}},[_vm._v(\"是\")])]],2):_vm._e(),_vm._v(\" \"),_c('el-form-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showSubConfig && (!!_vm.openState)),expression:\"showSubConfig && (!!openState)\"}],attrs:{\"label\":\"二级域名价格\",\"error\":_vm.getSubGasWarn,\"show-message\":_vm.customedCheck}},[_c('el-input-number',{attrs:{\"name\":\"subUnitPrice\",\"precision\":2,\"step\":1.0,\"controls-position\":\"right\",\"disabled\":!this.customedCheck,\"min\":_vm.configs.subGas},model:{value:(_vm.subUnitPrice),callback:function ($$v) {_vm.subUnitPrice=$$v},expression:\"subUnitPrice\"}}),_vm._v(\" \"),_c('el-checkbox',{staticClass:\"bas-domain--setprice-tip\",model:{value:(_vm.customedCheck),callback:function ($$v) {_vm.customedCheck=$$v},expression:\"customedCheck\"}},[_vm._v(\"\\n              Notice: 如开启自定义价格，将额外收取\"+_vm._s(_vm.configs.customedPriceGas)+\"BAS\\n            \")])],1),_vm._v(\" \"),_c('div'),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"购买期限\"}},[_c('el-input-number',{attrs:{\"name\":\"years\",\"controls-position\":\"right\",\"min\":1,\"max\":_vm.configs.maxYearReg},model:{value:(_vm.years),callback:function ($$v) {_vm.years=$$v},expression:\"years\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"Year\")])],1)],1),_vm._v(\" \"),(_vm.showTopDomainInfo)?_c('div',{staticClass:\"bas-regist--topdomain-container\"},[_c('h5',{},[_vm._v(\"根域名信息\")]),_vm._v(\" \"),_c('div',{staticClass:\"bas-inline-flex\"},[_c('div',{staticClass:\"bas-label-100\"},[_vm._v(\"到期日期:\")]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.getTopExpireDate))])]),_vm._v(\" \"),_c('div',{staticClass:\"bas-inline-flex\"},[_c('div',{staticClass:\"bas-label-100\"},[_vm._v(\"所有者:\")]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(this.topData.owner))]),_vm._v(\" \"),_c('a',{staticClass:\"bas-link bas-small\",staticStyle:{\"margin-left\":\"1.5rem\"},on:{\"click\":function($event){$event.preventDefault();return _vm.gotoWhois.apply(null, arguments)}}},[_vm._v(\"\\n              Who is >>\\n            \")])])]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"col-12 text-center\"},[_c('span',{staticClass:\"bas-text-green\"},[_vm._v(\"总计:\")]),_vm._v(\" \"),_c('h2',{staticClass:\"d-inline bas-text-green\"},[_vm._v(_vm._s(_vm.getTotal))]),_vm._v(\" \"),_c('span',{staticClass:\"bas-text-green\"},[_vm._v(\"BAS\")])])],1),_vm._v(\" \"),_c('div',{staticClass:\"bas-card__footer\"},[_c('button',{staticClass:\"btn w-25 bas-btn-primary\",on:{\"click\":_vm.registing}},[_vm._v(\"注册\")])])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"bas-card__header\"},[_c('div',{staticClass:\"bas-card__header-title\"},[_vm._v(\"\\n          注册域名\\n        \")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-04505750\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/Domain/Regist.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-04505750\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Regist.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Regist.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Regist.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-04505750\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Regist.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/Domain/Regist.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}