webpackJsonp([2],{CKfB:function(a,t){},IDjm:function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=e("Xxa5"),l=e.n(i),s=e("exGp"),n=e.n(s),o=e("woOf"),r=e.n(o),c=e("JX3P"),d=e("0xDb"),m=(e("1plq"),e("M/cH")),b=e("82Js"),f=e("Xyu6"),u={name:"MailDetailInfo",components:{LoadingDot:e("g1m8").a},computed:{fulltext:function(){var a=this.mailInfo.aliasName,t=this.mailInfo.hash,e=Object(d.g)(t);this.mailInfo.domaintext;return a?""+a:""+e},shortHash:function(){return this.mailInfo.hash?Object(d.g)(this.mailInfo.hash):this.mailInfo.hash},expirationDate:function(){return this.mailInfo.expiration?Object(d.h)(this.mailInfo.expiration):""}},data:function(){return{mailInfo:{hash:"",domainhash:"",aliasName:"",domaintext:"",expiration:0,owner:"",bca:"",abandoned:!0},refdata:{MXBCA:""},origin:{MXBCA:""},ctrl:{editEnabled:!1,loading:!1},maskDialog:{visible:!1,loading:!1}}},methods:{enableEditConf:function(){this.ctrl.editEnabled=!0},disableEditConf:function(){this.ctrl.editEnabled=!1},ShowMaskDialog:function(){this.maskDialog=r()({},this.maskDialog,{visible:!0,loading:!1})},CancelConfirm:function(){this.maskDialog=r()({},this.maskDialog,{visible:!1,loading:!1})},SubmitMailConfig:function(){var a=this;return n()(l.a.mark(function t(){var e,i,s,n,o,f,u,p,v,h,g;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.$store.getters.metaMaskDisabled){t.next=3;break}return a.$metamask(),t.abrupt("return");case 3:if(e=a.$store.getters.web3State,i=a.mailInfo.owner,s=e.chainId,n=e.wallet,o=a.mailInfo.hash,f=a.fulltext,u="",o){t.next=14;break}return u=a.$t("code.200004",{domaintext:a.fulltext}),a.$message(a.$basTip.error(u)),t.abrupt("return");case 14:if(Object(d.s)(i,n)){t.next=18;break}return u=a.$t("code.110110",{wallet:n,owner:i}),a.$message(a.$basTip.error(u)),t.abrupt("return");case 18:if(!(p=a.mailInfo.bca)||!Object(m.d)(p)){t.next=23;break}return u=a.$t("p.DomainRefDataValidIPIllegal",{typ:a.$t("l.RefDataMXBCA"),val:p}),a.$message(a.$basTip.error(u)),t.abrupt("return");case 23:return t.prev=23,a.ctrl.loading=!0,v=a.mailInfo.aliasName,t.next=28,Object(b.j)(o,p,v,s,n);case 28:h=t.sent,a.mailInfo=r()({},a.mailInfo,h),a.ctrl.loading=!1,a.ctrl.editEnabled=!1,t.next=60;break;case 35:t.prev=35,t.t0=t.catch(23),a.ctrl.loading=!1,g="",t.t1=t.t0,t.next=t.t1===c.a?42:t.t1===c.F?45:t.t1===c.s?48:t.t1===c.r?48:t.t1===c.z?52:54;break;case 42:return g=a.$t("code.ex",{wallet:n,owner:i}),a.$message(a.$basTip.error(g)),t.abrupt("return");case 45:return g=a.$t("code."+t.t0),a.$message(a.$basTip.error(g)),t.abrupt("return");case 48:return g=a.$t("code."+t.t0,{text:f}),a.$message(a.$basTip.error(g)),t.abrupt("return");case 52:return t.abrupt("return");case 54:return t.abrupt("break",55);case 55:if(t.t0.code!==c.G){t.next=59;break}return g=a.$t("code."+c.G),a.$message(a.$basTip.error(g)),t.abrupt("return");case 59:case 60:case"end":return t.stop()}},t,a,[[23,35]])}))()},goback:function(){this.$router.go(-1)},gotoDomainDetail:function(){var a=this.mailInfo.domaintext;a+""&&this.$router.push({path:"/domain/detail/"+a})}},mounted:function(){var a=this;return n()(l.a.mark(function t(){var e,i,s,n,o;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=a.$route.query.hash,i=a.$route.query.domaintext,a.mailInfo.hash=e,a.mailInfo.domaintext=i,s=a.$store.getters.web3State,n=s.chainId,t.next=8,Object(f.d)(e,n);case 8:(o=t.sent).state&&(a.mailInfo=r()({},a.mailInfo,o.mail));case 11:case"end":return t.stop()}},t,a)}))()}},p={render:function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"container"},[e("div",{staticClass:"row justify-content-center"},[e("div",{staticClass:"col-9 pt-2"},[e("div",{staticClass:"nav-breadcrumbs",on:{click:a.goback}},[e("span",{staticClass:"breadcrumbs"},[e("span",[a._v(a._s(a.$t("l.GoBackPrevPage")))])])])])]),a._v(" "),e("div",{staticClass:"row justify-content-center mt-3"},[e("div",{staticClass:"col-9 mail-box-wrapper "},[e("div",{staticClass:"inner-box"},[e("div",{staticClass:"mail-info--base"},[e("div",{staticClass:"mail-info-primary"},[e("label",[a._v(a._s(a.$t("l.MailLabel")))]),a._v(" "),e("span",[a._v(a._s(a.fulltext))])]),a._v(" "),e("div",{staticClass:"bas-hash-container"},[e("div",[e("label",{staticClass:"bas-info-label"},[a._v("\n                "+a._s(a.$t("l.MailHashLabel"))+"\n              ")])]),a._v(" "),e("el-input",{staticClass:"bas-hash-show",attrs:{type:"textarea",disabled:!0,autosize:""},model:{value:a.mailInfo.hash,callback:function(t){a.$set(a.mailInfo,"hash",t)},expression:"mailInfo.hash"}})],1),a._v(" "),e("div",[e("label",{staticClass:"bas-info-label"},[a._v(" "+a._s(a.$t("l.Domain")))]),a._v(" "),e("a",{staticClass:"mail-info-text bas-link",on:{click:a.gotoDomainDetail}},[a._v(a._s(a.mailInfo.domaintext))])]),a._v(" "),e("div",[e("label",{staticClass:"bas-info-label"},[a._v(a._s(a.$t("l.ExpiredDate")))]),a._v(" "),e("span",{staticClass:"mail-info-text"},[a._v(a._s(a.expirationDate))])])]),a._v(" "),e("div",{staticClass:"mail-conf-nav"},[e("label",{staticClass:"conf-label"},[a._v(a._s(a.$t("l.ConfigurationLabel")))]),a._v(" "),!a.ctrl.editEnabled&&Boolean(a.mailInfo.hash)?e("span",{staticClass:"breadcrumbs",on:{click:a.enableEditConf}},[e("i",{staticClass:"fa fa-edit"}),a._v(" "),e("span",[a._v(a._s(a.$t("l.UpdateTagLabel")))])]):a._e()]),a._v(" "),e("el-form",{staticClass:"mail-conf-container",attrs:{"label-width":"150px"}},[e("el-form-item",{attrs:{label:a.$t("l.MailAliasLabel")}},[e("el-input",{attrs:{disabled:!a.ctrl.editEnabled&&!a.ctrl.loading,type:"text",placeholder:a.$t("l.RefNoDataPlaceholder")},model:{value:a.mailInfo.aliasName,callback:function(t){a.$set(a.mailInfo,"aliasName",t)},expression:"mailInfo.aliasName"}})],1),a._v(" "),e("el-form-item",{attrs:{label:a.$t("l.BMailBCALabel")}},[a.ctrl.editEnabled||a.ctrl.loading?a._e():e("el-input",{attrs:{disabled:"true",type:"textarea",autosize:"{minRows:1,maxRows:5}",placeholder:a.$t("l.RefNoDataPlaceholder")},model:{value:a.mailInfo.bca,callback:function(t){a.$set(a.mailInfo,"bca",t)},expression:"mailInfo.bca"}}),a._v(" "),a.ctrl.editEnabled||a.ctrl.loading?e("el-input",{attrs:{type:"textarea",autosize:"{minRows:2,maxRows:5}",placeholder:a.$t("l.RefNoDataPlaceholder")},model:{value:a.mailInfo.bca,callback:function(t){a.$set(a.mailInfo,"bca",t)},expression:"mailInfo.bca"}}):a._e()],1),a._v(" "),a.ctrl.editEnabled?e("el-form-item",[e("el-button",{staticClass:"bas-w-68 bas-btn-primary",attrs:{type:"primary",disabled:a.ctrl.loading},on:{click:a.SubmitMailConfig}},[e("div",{staticStyle:{position:"relative"}},[a.ctrl.loading?e("LoadingDot"):a._e()],1),a._v("\n              "+a._s(a.ctrl.loading?a.$t("l.Transactioning"):a.$t("g.Confirm"))+"\n            ")]),a._v(" "),e("el-button",{staticClass:"w-25",attrs:{type:"default",disabled:a.ctrl.loading},on:{click:a.disableEditConf}},[a._v("\n              "+a._s(a.$t("g.Cancel"))+"\n            ")])],1):a._e()],1)],1)])]),a._v(" "),e("el-dialog",{attrs:{width:"25%","close-on-click-modal":!1,"show-close":!1,visible:a.maskDialog.visible},on:{"update:visible":function(t){return a.$set(a.maskDialog,"visible",t)}}},[e("div",{attrs:{slot:"title"},slot:"title"},[e("span",{staticStyle:{"margin-left":"10px"}},[a._v("\n        "+a._s(a.$t("p.MailUpdateConfigDialog",{text:a.fulltext}))+"\n      ")])]),a._v(" "),e("div",{staticClass:"container"},[e("div",{staticClass:"row justify-content-center"},[e("div",{staticClass:"col-10 text-center"},[e("h5",[a._v("\n            "+a._s(a.maskDialog.loading?a.$t("l.TransactionTip"):a.$t("p.MailUpdateConfigContirmTip"))+"\n          ")])])])]),a._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{size:"mini",disabled:a.maskDialog.loading},on:{click:a.CancelConfirm}},[a._v("\n        "+a._s(a.$t("g.Cancel"))+"\n      ")]),a._v(" "),e("el-button",{staticClass:"bas-btn-primary",attrs:{type:"primary",size:"mini",disabled:a.maskDialog.loading},on:{click:a.SubmitMailConfig}},[a._v("\n        "+a._s(a.$t("g.Confirm"))+"\n      ")]),a._v(" "),a.maskDialog.loading?e("loading-dot",{staticStyle:{float:"left"}}):a._e()],1)])],1)},staticRenderFns:[]};var v=e("VU/8")(u,p,!1,function(a){e("clos"),e("CKfB")},null,null);t.default=v.exports},clos:function(a,t){}});
//# sourceMappingURL=2.667714751fb9a976f535.js.map