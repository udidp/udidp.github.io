webpackJsonp([32],{DaO4:function(t,e){},xCFx:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("BO1k"),r=a.n(s),n=(a("pFYg"),a("Xxa5")),i=a.n(n),o=a("woOf"),c=a.n(o),u=a("exGp"),l=a.n(u),p=a("Dd8w"),d=a.n(p),m=a("0xDb"),h=a("A77I"),b=a("JX3P"),f=a("GqfT"),v=a("2Qll"),g={name:"RegistDomain",components:{GobackNav:a("/hYL").a},computed:d()({showDomainAppend:function(){return void 0!==this.domain&&""!==this.domain},topShow:function(){var t=Object(h.i)(this.domain);return"raretop"===t||"commontop"===t},subWarnShow:function(){return this.topasset&&this.topasset.owner&&!this.topasset.openApplied},customPriceEdidShow:function(){var t=Object(h.i)(this.domain);return!("raretop"!==t&&"commontop"!==t||!this.openApplied)},customPriceEditEnabled:function(){return this.openApplied&&this.isCustomed},domainType:function(){return""===this.domain?"":this.$t("g."+Object(h.i)(this.domain))},showTopAssetInfo:function(){return this.topasset&&this.topasset.owner},getTopOwner:function(){return this.topasset?this.topasset.owner:""},getTopExpired:function(){return this.topasset?Object(m.h)(this.topasset.expire,"YYYY-MM-DD HH:mm:ss"):""},getTotal:function(){if(""===this.domain)return 0;var t=parseFloat(this.unitPrice*this.years);return this.isCustomed?t+parseFloat(this.ruleState.externalBas):t}},Vuex.mapGetters({ruleState:"dapp/ruleState",minsubBas:function(t){return parseFloat(Object(m.C)(t.dapp.subGas))},maxYears:function(t){return t.dapp.maxRegYears}}),Vuex.mapState({dappState:function(t){return t.dapp}})),data:function(){return{domain:"",years:1,openApplied:!0,isCustomed:!1,subUnitPrice:4,unitPrice:4,maxPriceBas:h.e,topasset:{name:"",owner:"",openApplied:!1,isCustomed:!1,customPrice:4*Math.pow(10,18)},ctrl:{loading:!1},tableData:[{domains:"YYyyy",type:"Tom",price:"4",duration:"2",isFavor:!0}]}},methods:{setUnitPrice:function(){var t=this.domain,e=this.$store.getters["dapp/ruleState"];if(void 0!==t&&""!==t&&""!==t.trim()){var a=Object(h.i)(t),s=this.topasset;switch(a){case"subdomain":this.unitPrice=e.subBas,s.owner&&s.openApplied&&s.isCustomed,this.unitPrice=Object(m.C)(s.customPrice);break;case"raretop":this.unitPrice=e.rareBas;break;case"commontop":this.unitPrice=e.rootBas}}else this.unitPrice=e.subBas},changeLower:function(t){t&&(this.domain=t.trim().toLowerCase())},openAppliedChange:function(){},closeSubApply:function(t){this.isCustomed=!1;var e=this.$store.getters["dapp/ruleState"];this.subUnitPrice=e.subBas},openSubApply:function(t){},customedPriceChanged:function(){},customedCheckedChange:function(){if(!this.isCustomed){var t=this.$store.getters["dapp/ruleState"];this.subUnitPrice=t.subBas}},gotoWhois:function(){this.topasset.name&&this.$router.push({path:"/domain/detail/"+this.topasset.name})},loadTopasset:function(t){var e=this;return l()(i.a.mark(function a(){var s,r;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e,s=e.$store.getters["dapp/web3State"],(r=s.chainId)&&Object(f.a)(t,r).then(function(t){t.state&&(e.topasset=c()({},t.assetinfo),e.setUnitPrice())}).catch(function(t){});case 5:case"end":return a.stop()}},a,e)}))()},resetTopAsset:function(){var t=this.$store.state.dapp.subGas;this.topasset=c()({},{name:"",owner:"",openApplied:!1,isCustomed:!1,customPrice:t})},validForm:function(){var t=this.domain,e="";try{if(Object(h.a)(t),this.topasset.owner&&!this.topasset.openApplied)throw 10012;return!0}catch(a){switch(a){case 1e4:e=t+" "+this.$t("l.Illegal");break;case 10001:e=this.$t("code.10001",{max:h.d});break;case 10002:e=t+" "+this.$t("l.ErrorHasSpecialCharacter");break;case 10003:e=t+" 域名超过二级";break;case 10004:e=t+" "+this.$t("l.ErrorHasUpperCase");break;case 10012:e=t+" "+this.$t("l.ErrorHasSpecialCharacter");break;default:e=t+" "+this.$t("l.Illegal")}return this.$message(this.$basTip.error(e)),!1}},commitRegist:function(){var t=this;return l()(i.a.mark(function e(){var a,s,r,n,o,c,u,l,p;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.domain,t.validForm()){e.next=3;break}return e.abrupt("return");case 3:if(!t.$store.getters.metaMaskDisabled){e.next=6;break}return t.$metamask(),e.abrupt("return");case 6:if(s=Object(h.l)(a),r=t.$store.getters["dapp/web3State"],n=r.chainId,o=t.subUnitPrice,!(parseFloat(o)<=0)){e.next=14;break}return c=t.$t("p.SaleOnPriceUnitBasValidError",{begin:0,end:Object(m.u)(h.e)}),t.$message(t.$basTip.error(c)),e.abrupt("return");case 14:return e.prev=14,e.next=17,Object(f.d)(a,n,!s);case 17:if(!e.sent){e.next=21;break}return t.$message(t.$basTip.error(t.$t("code.200002",{domaintext:a}))),e.abrupt("return");case 21:e.next=27;break;case 23:return e.prev=23,e.t0=e.catch(14),e.abrupt("return");case 27:if(!s){e.next=35;break}return u=Object(h.g)(a.trim().toLowerCase()),l=u.subtext,p=u.toptext,e.next=33,t.commitSubRegisting(l,p);case 33:e.next=37;break;case 35:return e.next=37,t.commitTopRegisting(a);case 37:case"end":return e.stop()}},e,t,[[14,23]])}))()},commitSubRegisting:function(t,e){var a=this;return l()(i.a.mark(function s(){var r,n,o,u,l,p,d;return i.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return r=a.$store.getters["dapp/web3State"],n=r.chainId,o=r.wallet,u={isSubDomain:!0,domainText:t,topText:e,openApplied:!1,isCustomed:!1,customPriceWei:Object(m.e)(a.subUnitPrice+""),costWei:0,years:a.years,chainId:n,wallet:o},s.prev=4,a.ctrl.loading=!0,s.next=8,Object(v.b)(e,t,a.years,n,o);case 8:l=s.sent,a.ctrl.loading=!1,p=c()({},u,{hash:l.hash,costWei:l.costwei}),a.$router.push({name:"domain.applyresult",params:{commitData:p}}),s.next=34;break;case 15:s.prev=15,s.t0=s.catch(4),a.ctrl.loading=!1,d="",s.t1=s.t0,s.next=s.t1===b.d?22:s.t1===b.c?22:s.t1===b.B?25:s.t1===b.h?25:s.t1===b.l?28:s.t1===b.k?28:s.t1===b.c?30:32;break;case 22:return d=a.$t("code."+s.t0,{text:t}),a.$message(a.$basTip.error(d)),s.abrupt("return");case 25:return d=a.$t("code."+s.t0,{text:e}),a.$message(a.$basTip.error(d)),s.abrupt("return");case 28:return a.$message(a.$basTip.error(a.$t("code."+s.t0))),s.abrupt("return");case 30:return s.abrupt("return");case 32:return s.abrupt("break",33);case 33:case 34:case"end":return s.stop()}},s,a,[[4,15]])}))()},commitTopRegisting:function(t){var e=this;return l()(i.a.mark(function a(){var s,r,n,o,u,l,p,d;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return"",s=e.$store.getters["dapp/web3State"],r=s.chainId,n=s.wallet,Object(m.e)(e.getTotal),o=Object(m.e)(e.subUnitPrice),u={isSubDomain:!1,domainText:t,openApplied:e.openApplied,isCustomed:e.isCustomed,customPriceWei:o,years:e.years,chainId:r,wallet:n},l={domaintext:t,isCustomed:e.isCustomed,customWei:o,years:e.years,chainId:r,wallet:n},a.prev=9,e.ctrl.loading=!0,a.next=13,Object(v.a)(l);case 13:p=a.sent,e.ctrl.loading=!1,e.$router.push({name:"domain.applyresult",params:{commitData:c()({},u,{costWei:p.costwei,hash:p.hash})}}),a.next=37;break;case 18:a.prev=18,a.t0=a.catch(9),e.ctrl.loading=!1,d="",a.t1=a.t0,a.next=a.t1===b.d?25:a.t1===b.c?25:a.t1===b.B?28:a.t1===b.h?28:a.t1===b.l?31:a.t1===b.k?31:a.t1===b.c?33:35;break;case 25:case 28:return d=e.$t("code."+a.t0,{text:t}),e.$message(e.$basTip.error(d)),a.abrupt("return");case 31:return e.$message(e.$basTip.error(e.$t("code."+a.t0))),a.abrupt("return");case 33:return a.abrupt("return");case 35:return a.abrupt("break",36);case 36:case 37:case"end":return a.stop()}},a,e,[[9,18]])}))()}},created:function(){var t=localStorage.favourList,e={domains:"",type:"",price:"",duration:"1",isFavor:!0},a=!0,s=!1,n=void 0;try{for(var i,o=r()(t);!(a=(i=o.next()).done);a=!0){var c=i.value;e.domains=c,e.type=this.$t("g."+Object(h.i)(c));this.$store.getters["dapp/ruleState"],Object(h.i)(c)}}catch(t){s=!0,n=t}finally{try{!a&&o.return&&o.return()}finally{if(s)throw n}}},mounted:function(){this.domain=this.$route.params.domainText;var t=Object(m.j)(this.domain);t&&this.loadTopasset(t)},watch:{domain:function(t,e){if(this.setUnitPrice(),t&&t!==e&&Object(h.l)(t)){var a=Object(m.j)(t);a?this.loadTopasset(a):this.resetTopAsset()}}}},w={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",{staticClass:"bas-white-bg",attrs:{gutter:20}},[a("el-col",{staticClass:"bas-fav-info",attrs:{span:24}},[a("div",{staticClass:"bas-card__header"},[a("div",{staticClass:"bas-card__header-title"},[t._v("\n          "+t._s(t.$t("l.walletFav"))+"\n        ")])]),t._v(" "),a("div",{staticClass:"bas-gray-split"}),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.ctrl.loading,expression:"ctrl.loading"}],staticClass:"bas-card__body bas-border-none"},[a("div",{staticClass:"not-taken"},[a("h5",{staticClass:"not-taken"},[t._v(t._s(t.$t("l.notTaken")))]),t._v(" "),a("el-table",{ref:"multipleTableRef",staticStyle:{width:"100%"},attrs:{data:t.tableData},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{"header-align":"left",align:"left","class-name":"column-domains",label:"Domains"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.domains))]}}])}),t._v(" "),a("el-table-column",{attrs:{"header-align":"left",align:"left",property:"type",label:"Type"}}),t._v(" "),a("el-table-column",{attrs:{"header-align":"left",align:"left",property:"price",label:"Price"}}),t._v(" "),a("el-table-column",{attrs:{"header-align":"left",align:"left",property:"duration",label:"Duration","show-overflow-tooltip":"","min-width":"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v("year")]),t._v(" "),a("el-input-number",{attrs:{precision:2,step:1,"controls-position":"",min:t.minsubBas},on:{change:t.customedPriceChanged},model:{value:e.row.duration,callback:function(a){t.$set(e.row,"duration",a)},expression:"scope.row.duration"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{"header-align":"left",align:"left","class-name":"column-domains",label:"Total"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.price*e.row.duration))]}}])}),t._v(" "),a("el-table-column",{attrs:{"header-align":"left",align:"left",label:"Favourite"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{attrs:{src:t.row.isFavor?"/static/icons/favour.svg":"/static/icons/unfavour.svg",alt:""}})]}}])})],1)],1)])])],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{staticClass:"text-center regist-footer",attrs:{span:24}},[a("div",{staticClass:"total"},[a("span",{staticStyle:{color:"#fff"}},[t._v(t._s(t.$t("l.Total"))+":")]),t._v(" "),a("h2",{staticClass:"d-inline bas-text-green"},[t._v(t._s(t.getTotal))]),t._v(" "),a("span",{staticClass:"bas-text-green"},[t._v("UDID")])]),t._v(" "),a("div",{staticClass:"bas-card__footer"},[a("button",{staticClass:"btn bas-btn-primary",on:{click:t.commitRegist}},[t._v("\n          "+t._s(t.$t("l.RegistBtn"))+"\n        ")])])])],1)],1)},staticRenderFns:[]};var x=a("VU/8")(g,w,!1,function(t){a("DaO4")},null,null);e.default=x.exports}});
//# sourceMappingURL=32.06909c5fdc3585573510.js.map