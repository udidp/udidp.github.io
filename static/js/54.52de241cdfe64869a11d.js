webpackJsonp([54],{"2j7W":function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=a("woOf"),i=a.n(e),n=a("g1m8"),o=a("9DUr"),c=a("SR37"),r=a("1rPB"),m=a("rFtf"),l={name:"DomainNewTopRegisting",data:function(){return{commitData:{domain:"",costWei:"",openApplied:!0,isCustomed:!1,customPriceWei:0,year:""},txHashes:[],dappState:{},completed:!0,registState:"approving"}},components:{LoadingDot:n.a,RegistApplyFooter:o.a,RegistTransFooter:c.a},mounted:function(){var t=this.$store.getters["web3/dappState"];this.dappState=i()({},t);var s=this.$route.params.commitData;s&&t.chainId&&(this.commitData=i()({},this.commitData,s),this.registCommit(t.chainId,s.costWei))},computed:{getItems:function(){return this.txHashes},getRegistState:function(){return"p."+this.registState},getFullDomain:function(){return this.commitData.domain+"."+this.commitData.topDomain},btnDisabled:function(){return"success"!==this.registState&&"fail"!==this.registState}},methods:{addItem:function(t,s){this.txHashes.push({hash:t,state:s})},updateItem:function(t,s){var a=this.txHashes.findIndex(function(s){return s.hash===t});a>=0&&this.txHashes.splice(a,1,{hash:t,state:s})},registCommit:function(t,s){var a=this;this.registState="approving",Object(r.a)(t,s).on("transactionHash",function(t){a.addItem(t,"loading")}).on("receipt",function(t){t.status;a.updateItem(t.transactionHash,"success"),a.registState="confirming"}).on("error",function(t,s){if(a.registState="fail",4001===t.code){var e=a.$t("g.MetaMaskRejectedAuth");a.$message(a.$basTip.error(e))}s&&a.updateItem(s.transactionHash,"fail")})},configRefs:function(){var t=this.commitData.domain;t&&this.$router.push({path:"/domain/dnsupdate/"+t})},gotoWallet:function(){this.$store.getters.metaMaskDisabled?this.$metamask():this.$router.push({name:"wallet.layout"})},continueRegist:function(){if(this.$store.getters.metaMaskDisabled)this.$metamask();else{this.$router.push({name:"domain.regist",params:{domain:""}})}}},watch:{registState:function(t,s){if("approving"===s&&"confirming"===t){var a=this,e=this.commitData.domain,i=this.commitData.openApplied,n=this.commitData.isCustomed,o=this.commitData.customPriceWei,c=this.commitData.year;Object(m.e)(e,i,n,o,c).on("transactionHash",function(t){a.addItem(t,"loading")}).on("receipt",function(t){a.updateItem(t.transactionHash,"success"),a.registState="success"}).on("error",function(t,s){if(a.registState="fail",4001===t.code){var e=a.$t("g.MetaMaskRejectedAuth");a.$message(a.$basTip.error(e))}s&&a.updateItem(s.transactionHash,"fail")})}}}},d={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"container"},[a("div",{staticClass:"row justify-content-center align-items-center"},[a("el-card",{staticClass:"col-md-8 col-sm-10 box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("h4",[t._v("\n          Transaction Hash\n        ")])]),t._v(" "),t._l(t.getItems,function(s,e){return a("div",{key:e,staticClass:"text item bas-inline-between"},[a("div",{},[t._v(t._s(s.hash))]),t._v(" "),"loading"===s.state?a("div",[a("loading-dot")],1):"success"===s.state?a("div",[a("i",{staticClass:"fa fa-check bas-text-green"})]):"fail"===s.state?a("div",[a("i",{staticClass:"fa fa-close text-danger"})]):t._e()])})],2)],1),t._v(" "),a("div",{staticClass:"row",staticStyle:{height:"24px"}}),t._v(" "),a("div",{staticClass:"row justify-content-center align-items-center "},[t.completed?a("el-card",{staticClass:"col-md-8 col-sm-10 box-card"},[a("div",{staticClass:"domain-regist--result-container text-center"},[a("img",{staticClass:"bas-bingo",attrs:{src:"/static/icons/bingo.png"}}),t._v(" "),"approving"==t.registState?a("h6",{staticClass:"bas-text-green mt-2"},[t._v("\n          "+t._s(t.$t("p.DomainRegistApprove"))+"\n        ")]):t._e(),t._v(" "),"confirming"==t.registState?a("h6",{staticClass:"bas-text-green mt-2"},[t._v("\n          "+t._s(t.$t("p.DomainRegistConfirm"))+"\n        ")]):t._e(),t._v(" "),"fail"==t.registState?a("h6",{staticClass:"text-danger mt-2"},[t._v("\n          "+t._s(t.$t("p.DomainRegistFail"))+"\n        ")]):t._e(),t._v(" "),"success"==t.registState?a("h6",{staticClass:"bas-text-green mt-2"},[t._v("\n          "+t._s(t.$t("p.DomainRegistSuccess"))+"\n        ")]):t._e(),t._v(" "),a("h2",{staticStyle:{"margin-top":".75rem"}},[t._v("\n          "+t._s(""+t.commitData.domain)+"\n        ")]),t._v(" "),"success"==t.registState?a("h6",{staticStyle:{color:"rgba(212,216,216,1)"}},[t._v("\n          "+t._s(t.$t("p.DomainRegistSuccessTip"))+"\n        ")]):t._e()]),t._v(" "),a("div",{staticClass:"w-100 bas-btn-group text-center"},[a("button",{staticClass:"w-25 mx-2 btn bas-btn-green-border",attrs:{disabled:t.btnDisabled},on:{click:t.configRefs}},[t.btnDisabled?a("i",{staticClass:"fa fa-ban"}):t._e(),t._v("\n          配置域名\n        ")]),t._v(" "),a("button",{staticClass:"w-25 mx-2 btn bas-btn-green-border",attrs:{disabled:t.btnDisabled},on:{click:t.gotoWallet}},[t.btnDisabled?a("i",{staticClass:"fa fa-ban"}):t._e(),t._v("\n          去我的资产钱包\n        ")]),t._v(" "),a("button",{staticClass:"w-25 mx-2 btn",class:t.btnDisabled?"":"bas-btn-primary",attrs:{disabled:t.btnDisabled},on:{click:t.continueRegist}},[t.btnDisabled?a("i",{staticClass:"fa fa-ban"}):t._e(),t._v("\n          继续申请\n        ")])])]):t._e()],1)])},staticRenderFns:[]};var u=a("VU/8")(l,d,!1,function(t){a("GkYR")},null,null);s.default=u.exports},GkYR:function(t,s){}});
//# sourceMappingURL=54.52de241cdfe64869a11d.js.map