webpackJsonp([52],{"kJ/3":function(t,a){},qPXf:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=s("woOf"),i=s.n(e),n=s("g1m8"),o=s("0xDb"),r=s("x6sZ"),c=s("U/4D"),m="etherscan.io",l="https",d="tx";function u(t,a){if(!Object(c.a)(t))return"";var s=Object(c.e)(t);return s&&a?l+"://"+s.toLowerCase()+"."+m+"/"+d+"/"+a:""}var p={name:"RegistResult",components:{LoadingDot:n.a},computed:{domainFullText:function(){if(!this.commitData.domainText)return"";var t=this.commitData.isSubDomain?this.commitData.domainText+"."+this.commitData.topText:this.commitData.domainText;try{return Object(o.w)(t)}catch(a){return t}},btnDisabled:function(){return!this.completed},getTxHashes:function(){return this.transactions}},data:function(){return{completed:!1,registState:"approving",commitData:{isSubDomain:!1,domainText:"",topText:"",costWei:"",openApplied:!0,isCustomed:!1,years:1},transactions:[],ctrl:{inprogress:!1},tmpData:{expire:0,unitTS:31536e3},dappState:{chainId:"",wallet:""}}},methods:{addTxHashItem:function(t,a){this.transactions.push({hash:t,state:a})},updateTxHashItem:function(t,a){var s=this.transactions.findIndex(function(a){return a.hash===t});s>=0&&this.transactions.splice(s,1,{hash:t,state:a})},goback:function(){this.$router.go(-1)},goEtherscan:function(t){var a=this.$store.getters.web3State.chainId,s=u(a,t);s&&window.open(s,"bas_"+t)},commitApprove:function(){var t=this,a=this.$store.getters["dapp/web3State"],s=a.chainId,e=a.wallet,i=this.commitData.costWei+"";Object(r.a)(i,s,e).on("transactionHash",function(a){t.registState="approving",t.ctrl.inprogress=!0,t.addTxHashItem(a,"loading")}).on("receipt",function(a){a.status;t.updateTxHashItem(a.transactionHash,"success"),t.registState="confirming"}).on("error",function(a,s){t.registState="fail",s&&t.updateTxHashItem(s.transactionHash,"fail"),t.ctrl.inprogress=!1}).catch(function(a){if(t.ctrl.inprogress=!1,t.registState="fail",4001===a.code){var s=t.$t("code."+a.code);t.$message(t.$basTip.error(s))}else-32601===a.code&&a.message&&t.$message(t.$basTip.error(a.message))})},domainSendTransaction:function(){var t=this,a=this.commitData,s=this,e=this.$store.getters.web3State,i=(new Date).getTime()/1e3+parseInt(a.years)*this.tmpData.unitTS;this.tmpData.expire=i,a.isSubDomain?Object(r.h)({topText:a.topText,subText:a.domainText,years:a.years,chainId:a.chainId,wallet:a.wallet}).on("transactionHash",function(t){s.addTxHashItem(t,"loading")}).on("receipt",function(a){a.status?(s.registState="success",t.ctrl.inprogress=!1,s.updateTxHashItem(a.transactionHash,"success"),s.$store.dispatch("ewallet/syncEWalletAssets",e)):(s.registState="fail",s.updateTxHashItem(a.transactionHash,"fail")),s.completed=!0}).on("error",function(a,e){s.registState="fail",t.ctrl.inprogress=!1,e&&s.updateTxHashItem(e.transactionHash,"fail")}).catch(function(a){if(s.registState="fail",t.ctrl.inprogress=!1,4001===a.code){var e=s.$t("code."+a.code);s.$message(s.$basTip.error(e))}else-32601===a.code&&a.message&&s.$message(s.$basTip.error(a.message))}):Object(r.g)(a).on("transactionHash",function(t){s.addTxHashItem(t,"loading")}).on("receipt",function(a){var i=a.status;t.ctrl.inprogress=!1,i?(s.registState="success",s.updateTxHashItem(a.transactionHash,"success"),setTimeout(function(){s.$store.dispatch("ewallet/syncEWalletAssets",e)},1e3)):(s.registState="fail",s.updateTxHashItem(a.transactionHash,"fail")),s.completed=!0}).on("error",function(a,e){t.ctrl.inprogress=!1,s.registState="fail",e&&s.updateTxHashItem(e.transactionHash,"fail")}).catch(function(t){if(s.registState="fail",4001===t.code){var a=s.$t("code."+t.code);s.$message(s.$basTip.error(a))}else-32601===t.code&&t.message&&s.$message(s.$basTip.error(t.message))})},gotoUpdateDNS:function(){if(this.$store.getters.metaMaskDisabled)this.$metamask();else{var t=this.commitData.domainText;this.commitData.isSubDomain&&(t=this.commitData.domainText+"."+this.commitData.topText);var a=this.commitData;t&&this.$router.push({path:"/domain/updaterefdata/"+t,name:"domain.updaterefdata",params:{domaintext:t,isRoot:!Boolean(a.isSubDomain),openApplied:a.openApplied,isCustomed:a.isCustomed,customedPrice:a.customedPrice}})}},gotoWallet:function(){if(this.$store.getters.metaMaskDisabled)this.$metamask();else{var t=this.commitData.isSubDomain?"subasset":"topasset";this.$router.push({name:"wallet.layout",query:{activeName:t}})}},continueRegist:function(){this.$store.getters.metaMaskDisabled?this.$metamask():this.commitData.isSubDomain?this.commitData.topText&&this.$router.push({path:"/domain/applysub/"+this.commitData.topText}):this.$router.push({name:"domain.applydomain",params:{domainText:""}})}},mounted:function(){var t=this.$route.params.commitData;this.commitData=i()(this.commitData,t),this.commitData.domainText&&this.commitData.costWei&&this.commitApprove()},watch:{registState:function(t,a){"approving"===a&&"confirming"===t&&this.domainSendTransaction()}}},h={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"background-fill-wrapper bas-gray-bg"},[s("div",{staticClass:"container"},[s("div",{staticClass:"row justify-content-center align-items-center d-none"},[s("div",{staticClass:"col-md-8 col-sm-10 pb-2",staticStyle:{"padding-left":"0"}},[s("button",{staticClass:"bas-btn-goback",attrs:{disabled:t.ctrl.inprogress},on:{click:t.goback}},[s("span",{staticClass:"text"},[t._v("\n            "+t._s(t.$t("l.GoBackPrevPage"))+"\n          ")])])])]),t._v(" "),s("div",{staticClass:"row justify-content-center align-items-center pt-3"},[s("el-card",{staticClass:"col-md-8 col-sm-10 box-card "},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("h4",[t._v("\n            Transaction Hash\n          ")])]),t._v(" "),t._l(t.transactions,function(a,e){return s("div",{key:e,staticClass:"text item bas-inline-between"},[s("div",{on:{click:function(s){return t.goEtherscan(a.hash)}}},[t._v(t._s(a.hash))]),t._v(" "),"loading"===a.state?s("div",[s("loading-dot")],1):"success"===a.state?s("div",[s("i",{staticClass:"fa fa-check bas-text-green"})]):"fail"===a.state?s("div",[s("i",{staticClass:"fa fa-close text-danger"})]):t._e()])})],2)],1),t._v(" "),s("div",{staticClass:"row justify-content-center align-items-center mt-3"},[s("el-card",{staticClass:"col-md-8 col-sm-10 box-card"},[s("div",{staticClass:"domain-regist--result-container text-center"},[s("img",{staticClass:"bas-bingo",attrs:{src:"/static/icons/bingo.png"}}),t._v(" "),"approving"==t.registState?s("h6",{staticClass:"bas-text-green mt-2"},[t._v("\n            "+t._s(t.$t("p.DomainRegistApprove"))+"\n          ")]):t._e(),t._v(" "),"confirming"==t.registState?s("h6",{staticClass:"bas-text-green mt-2"},[t._v("\n            "+t._s(t.$t("p.DomainRegistConfirm"))+"\n          ")]):t._e(),t._v(" "),"fail"==t.registState?s("h6",{staticClass:"text-danger mt-2"},[t._v("\n            "+t._s(t.$t("p.DomainRegistFail"))+"\n          ")]):t._e(),t._v(" "),"success"==t.registState?s("h6",{staticClass:"bas-text-green mt-2"},[t._v("\n            "+t._s(t.$t("p.DomainRegistSuccess"))+"\n          ")]):t._e(),t._v(" "),s("h2",{staticStyle:{"margin-top":".75rem"}},[t._v("\n            "+t._s(t.domainFullText)+"\n          ")]),t._v(" "),"success"==t.registState?s("h6",{staticStyle:{color:"rgba(212,216,216,1)"}},[t._v("\n            "+t._s(t.$t("p.DomainRegistSuccessTip"))+"\n          ")]):t._e()]),t._v(" "),s("div",{staticClass:"w-100 bas-btn-group text-center"},[s("button",{staticClass:"w-25 mx-2 btn bas-btn-green-border",attrs:{disabled:t.btnDisabled},on:{click:t.gotoUpdateDNS}},[t.btnDisabled?s("i",{staticClass:"fa fa-ban"}):t._e(),t._v("\n            "+t._s(t.$t("l.ConfigurationDNS"))+"\n          ")]),t._v(" "),s("button",{staticClass:"w-25 mx-2 btn bas-btn-green-border",attrs:{disabled:t.btnDisabled},on:{click:t.gotoWallet}},[t.completed?t._e():s("i",{staticClass:"fa fa-ban"}),t._v("\n            "+t._s(t.$t("l.GtotoMyWallet"))+"\n          ")]),t._v(" "),s("button",{staticClass:"w-25 mx-2 btn",class:t.btnDisabled?"":"bas-btn-primary",attrs:{disabled:t.btnDisabled},on:{click:t.continueRegist}},[t.completed?t._e():s("i",{staticClass:"fa fa-ban"}),t._v("\n             "+t._s(t.$t("l.ApplyAgain"))+"\n          ")])])])],1)])])},staticRenderFns:[]};var g=s("VU/8")(p,h,!1,function(t){s("kJ/3")},null,null);a.default=g.exports}});
//# sourceMappingURL=52.6225416034b2bb4c46ff.js.map